using System;
using System.Collections.Generic;
using TaleWorlds.Core;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.Election
{
	// Token: 0x0200026C RID: 620
	public abstract class DecisionOutcome
	{
		// Token: 0x0600206F RID: 8303 RVA: 0x0008ADFA File Offset: 0x00088FFA
		protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			collectedObjects.Add(this.SupporterList);
			collectedObjects.Add(this._sponsorClan);
		}

		// Token: 0x06002070 RID: 8304 RVA: 0x0008AE14 File Offset: 0x00089014
		internal static object AutoGeneratedGetMemberValueInitialMerit(object o)
		{
			return ((DecisionOutcome)o).InitialMerit;
		}

		// Token: 0x06002071 RID: 8305 RVA: 0x0008AE26 File Offset: 0x00089026
		internal static object AutoGeneratedGetMemberValueSupporterList(object o)
		{
			return ((DecisionOutcome)o).SupporterList;
		}

		// Token: 0x06002072 RID: 8306 RVA: 0x0008AE33 File Offset: 0x00089033
		internal static object AutoGeneratedGetMemberValue_sponsorClan(object o)
		{
			return ((DecisionOutcome)o)._sponsorClan;
		}

		// Token: 0x17000857 RID: 2135
		// (get) Token: 0x06002073 RID: 8307 RVA: 0x0008AE40 File Offset: 0x00089040
		public float Support
		{
			get
			{
				float num = 0f;
				using (List<Supporter>.Enumerator enumerator = this.SupporterList.GetEnumerator())
				{
					while (enumerator.MoveNext())
					{
						switch (enumerator.Current.SupportWeight)
						{
						case Supporter.SupportWeights.SlightlyFavor:
							num += 0.2f;
							break;
						case Supporter.SupportWeights.StronglyFavor:
							num += 0.4f;
							break;
						case Supporter.SupportWeights.FullyPush:
							num += 1f;
							break;
						}
					}
				}
				return num;
			}
		}

		// Token: 0x17000858 RID: 2136
		// (get) Token: 0x06002074 RID: 8308 RVA: 0x0008AECC File Offset: 0x000890CC
		public float Merit
		{
			get
			{
				return this.InitialMerit * (1f + this.Support);
			}
		}

		// Token: 0x17000859 RID: 2137
		// (get) Token: 0x06002075 RID: 8309 RVA: 0x0008AEE1 File Offset: 0x000890E1
		public Clan SponsorClan
		{
			get
			{
				return this._sponsorClan;
			}
		}

		// Token: 0x1700085A RID: 2138
		// (get) Token: 0x06002076 RID: 8310 RVA: 0x0008AEE9 File Offset: 0x000890E9
		// (set) Token: 0x06002077 RID: 8311 RVA: 0x0008AEF1 File Offset: 0x000890F1
		public float InitialSupport { get; internal set; }

		// Token: 0x1700085B RID: 2139
		// (get) Token: 0x06002078 RID: 8312 RVA: 0x0008AEFA File Offset: 0x000890FA
		// (set) Token: 0x06002079 RID: 8313 RVA: 0x0008AF02 File Offset: 0x00089102
		public float Likelihood { get; internal set; }

		// Token: 0x1700085C RID: 2140
		// (get) Token: 0x0600207A RID: 8314 RVA: 0x0008AF0B File Offset: 0x0008910B
		// (set) Token: 0x0600207B RID: 8315 RVA: 0x0008AF13 File Offset: 0x00089113
		public float TotalSupportPoints { get; internal set; }

		// Token: 0x1700085D RID: 2141
		// (get) Token: 0x0600207C RID: 8316 RVA: 0x0008AF1C File Offset: 0x0008911C
		// (set) Token: 0x0600207D RID: 8317 RVA: 0x0008AF24 File Offset: 0x00089124
		public float WinChance { get; internal set; }

		// Token: 0x0600207E RID: 8318
		public abstract TextObject GetDecisionTitle();

		// Token: 0x0600207F RID: 8319
		public abstract TextObject GetDecisionDescription();

		// Token: 0x06002080 RID: 8320
		public abstract string GetDecisionLink();

		// Token: 0x06002081 RID: 8321
		public abstract ImageIdentifier GetDecisionImageIdentifier();

		// Token: 0x06002082 RID: 8322 RVA: 0x0008AF2D File Offset: 0x0008912D
		public void AddSupport(Supporter supporter)
		{
			this.SupporterList.Add(supporter);
		}

		// Token: 0x06002083 RID: 8323 RVA: 0x0008AF3B File Offset: 0x0008913B
		public void ResetSupport(Supporter supporter)
		{
			if (this.SupporterList.Contains(supporter))
			{
				this.SupporterList.Remove(supporter);
			}
		}

		// Token: 0x06002084 RID: 8324 RVA: 0x0008AF58 File Offset: 0x00089158
		public void SetSponsor(Clan sponsorClan)
		{
			this._sponsorClan = sponsorClan;
		}

		// Token: 0x04000A39 RID: 2617
		[SaveableField(0)]
		public float InitialMerit;

		// Token: 0x04000A3A RID: 2618
		[SaveableField(1)]
		public List<Supporter> SupporterList = new List<Supporter>();

		// Token: 0x04000A3B RID: 2619
		[SaveableField(2)]
		private Clan _sponsorClan;
	}
}
