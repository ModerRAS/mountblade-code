using System;
using System.Collections.Generic;
using Helpers;
using TaleWorlds.Core;
using TaleWorlds.Localization;
using TaleWorlds.ObjectSystem;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.LogEntries
{
	// Token: 0x020002D2 RID: 722
	public class ChildbirthLogEntry : LogEntry, IEncyclopediaLog, IChatNotification
	{
		// Token: 0x06002A80 RID: 10880 RVA: 0x000B5796 File Offset: 0x000B3996
		internal static void AutoGeneratedStaticCollectObjectsChildbirthLogEntry(object o, List<object> collectedObjects)
		{
			((ChildbirthLogEntry)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06002A81 RID: 10881 RVA: 0x000B57A4 File Offset: 0x000B39A4
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this.Mother);
			collectedObjects.Add(this.NewbornHero);
		}

		// Token: 0x06002A82 RID: 10882 RVA: 0x000B57C5 File Offset: 0x000B39C5
		internal static object AutoGeneratedGetMemberValueNewbornHero(object o)
		{
			return ((ChildbirthLogEntry)o).NewbornHero;
		}

		// Token: 0x06002A83 RID: 10883 RVA: 0x000B57D2 File Offset: 0x000B39D2
		internal static object AutoGeneratedGetMemberValueMother(object o)
		{
			return ((ChildbirthLogEntry)o).Mother;
		}

		// Token: 0x17000A86 RID: 2694
		// (get) Token: 0x06002A84 RID: 10884 RVA: 0x000B57DF File Offset: 0x000B39DF
		// (set) Token: 0x06002A85 RID: 10885 RVA: 0x000B57E7 File Offset: 0x000B39E7
		[SaveableProperty(143)]
		public Hero NewbornHero { get; private set; }

		// Token: 0x17000A87 RID: 2695
		// (get) Token: 0x06002A86 RID: 10886 RVA: 0x000B57F0 File Offset: 0x000B39F0
		public bool IsVisibleNotification
		{
			get
			{
				return true;
			}
		}

		// Token: 0x17000A88 RID: 2696
		// (get) Token: 0x06002A87 RID: 10887 RVA: 0x000B57F3 File Offset: 0x000B39F3
		public override ChatNotificationType NotificationType
		{
			get
			{
				return base.CivilianNotification(this.Mother.Clan);
			}
		}

		// Token: 0x17000A89 RID: 2697
		// (get) Token: 0x06002A88 RID: 10888 RVA: 0x000B5806 File Offset: 0x000B3A06
		public override CampaignTime KeepInHistoryTime
		{
			get
			{
				return CampaignTime.Days(Campaign.Current.Models.PregnancyModel.PregnancyDurationInDays * 2f);
			}
		}

		// Token: 0x17000A8A RID: 2698
		// (get) Token: 0x06002A89 RID: 10889 RVA: 0x000B5827 File Offset: 0x000B3A27
		// (set) Token: 0x06002A8A RID: 10890 RVA: 0x000B582F File Offset: 0x000B3A2F
		public bool NeedsNewLogEntryForTwin { get; private set; }

		// Token: 0x17000A8B RID: 2699
		// (get) Token: 0x06002A8B RID: 10891 RVA: 0x000B5838 File Offset: 0x000B3A38
		// (set) Token: 0x06002A8C RID: 10892 RVA: 0x000B5840 File Offset: 0x000B3A40
		public Hero NewLogTwin { get; private set; }

		// Token: 0x06002A8D RID: 10893 RVA: 0x000B5849 File Offset: 0x000B3A49
		public ChildbirthLogEntry(Hero mother, Hero newbornHero)
		{
			this.Mother = mother;
			this.NewbornHero = newbornHero;
		}

		// Token: 0x06002A8E RID: 10894 RVA: 0x000B585F File Offset: 0x000B3A5F
		public override string ToString()
		{
			return this.GetEncyclopediaText().ToString();
		}

		// Token: 0x06002A8F RID: 10895 RVA: 0x000B586C File Offset: 0x000B3A6C
		public TextObject GetNotificationText()
		{
			return this.GetEncyclopediaText();
		}

		// Token: 0x06002A90 RID: 10896 RVA: 0x000B5874 File Offset: 0x000B3A74
		public bool IsVisibleInEncyclopediaPageOf<T>(T obj) where T : MBObjectBase
		{
			return obj == this.Mother;
		}

		// Token: 0x06002A91 RID: 10897 RVA: 0x000B5884 File Offset: 0x000B3A84
		public TextObject GetEncyclopediaText()
		{
			TextObject textObject;
			if (this.NewbornHero != null)
			{
				textObject = GameTexts.FindText("str_notification_give_birth_single_child", null);
			}
			else
			{
				textObject = GameTexts.FindText("str_notification_give_birth_single_stillborn", null);
			}
			StringHelpers.SetCharacterProperties("MOTHER", this.Mother.CharacterObject, textObject, false);
			return textObject;
		}

		// Token: 0x04000CC1 RID: 3265
		[SaveableField(140)]
		public readonly Hero Mother;
	}
}
