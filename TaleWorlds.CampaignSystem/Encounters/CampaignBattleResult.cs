using System;
using System.Collections.Generic;
using TaleWorlds.Core;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.Encounters
{
	// Token: 0x02000290 RID: 656
	public class CampaignBattleResult
	{
		// Token: 0x060023AD RID: 9133 RVA: 0x00096D22 File Offset: 0x00094F22
		internal static void AutoGeneratedStaticCollectObjectsCampaignBattleResult(object o, List<object> collectedObjects)
		{
			((CampaignBattleResult)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x060023AE RID: 9134 RVA: 0x00096D30 File Offset: 0x00094F30
		protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
		}

		// Token: 0x060023AF RID: 9135 RVA: 0x00096D32 File Offset: 0x00094F32
		internal static object AutoGeneratedGetMemberValuePlayerVictory(object o)
		{
			return ((CampaignBattleResult)o).PlayerVictory;
		}

		// Token: 0x060023B0 RID: 9136 RVA: 0x00096D44 File Offset: 0x00094F44
		internal static object AutoGeneratedGetMemberValuePlayerDefeat(object o)
		{
			return ((CampaignBattleResult)o).PlayerDefeat;
		}

		// Token: 0x060023B1 RID: 9137 RVA: 0x00096D56 File Offset: 0x00094F56
		internal static object AutoGeneratedGetMemberValueEnemyPulledBack(object o)
		{
			return ((CampaignBattleResult)o).EnemyPulledBack;
		}

		// Token: 0x060023B2 RID: 9138 RVA: 0x00096D68 File Offset: 0x00094F68
		internal static object AutoGeneratedGetMemberValueEnemyRetreated(object o)
		{
			return ((CampaignBattleResult)o).EnemyRetreated;
		}

		// Token: 0x170008E1 RID: 2273
		// (get) Token: 0x060023B3 RID: 9139 RVA: 0x00096D7A File Offset: 0x00094F7A
		// (set) Token: 0x060023B4 RID: 9140 RVA: 0x00096D82 File Offset: 0x00094F82
		[SaveableProperty(0)]
		public bool PlayerVictory { get; private set; }

		// Token: 0x170008E2 RID: 2274
		// (get) Token: 0x060023B5 RID: 9141 RVA: 0x00096D8B File Offset: 0x00094F8B
		// (set) Token: 0x060023B6 RID: 9142 RVA: 0x00096D93 File Offset: 0x00094F93
		[SaveableProperty(1)]
		public bool PlayerDefeat { get; private set; }

		// Token: 0x170008E3 RID: 2275
		// (get) Token: 0x060023B7 RID: 9143 RVA: 0x00096D9C File Offset: 0x00094F9C
		// (set) Token: 0x060023B8 RID: 9144 RVA: 0x00096DA4 File Offset: 0x00094FA4
		[SaveableProperty(2)]
		public bool EnemyPulledBack { get; private set; }

		// Token: 0x170008E4 RID: 2276
		// (get) Token: 0x060023B9 RID: 9145 RVA: 0x00096DAD File Offset: 0x00094FAD
		// (set) Token: 0x060023BA RID: 9146 RVA: 0x00096DB5 File Offset: 0x00094FB5
		[SaveableProperty(3)]
		public bool EnemyRetreated { get; private set; }

		// Token: 0x170008E5 RID: 2277
		// (get) Token: 0x060023BB RID: 9147 RVA: 0x00096DBE File Offset: 0x00094FBE
		public bool BattleResolved
		{
			get
			{
				return this.PlayerVictory || this.PlayerDefeat;
			}
		}

		// Token: 0x060023BC RID: 9148 RVA: 0x00096DD0 File Offset: 0x00094FD0
		public static CampaignBattleResult GetResult(BattleState winnerSide, bool enemyRetreated = false)
		{
			if (PlayerEncounter.Current != null)
			{
				CampaignBattleResult campaignBattleResult = new CampaignBattleResult();
				if ((winnerSide == BattleState.AttackerVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker) || (winnerSide == BattleState.DefenderVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Defender))
				{
					campaignBattleResult.PlayerVictory = true;
				}
				else if ((winnerSide == BattleState.AttackerVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Defender) || (winnerSide == BattleState.DefenderVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker))
				{
					campaignBattleResult.PlayerDefeat = true;
				}
				else if (winnerSide == BattleState.DefenderPullBack && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker)
				{
					campaignBattleResult.EnemyPulledBack = true;
				}
				campaignBattleResult.EnemyRetreated = enemyRetreated;
				return campaignBattleResult;
			}
			return null;
		}
	}
}
