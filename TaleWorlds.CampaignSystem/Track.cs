using System;
using System.Collections.Generic;
using TaleWorlds.CampaignSystem.Map;
using TaleWorlds.CampaignSystem.Party;
using TaleWorlds.Library;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem
{
	// Token: 0x02000067 RID: 103
	public sealed class Track : ILocatable<Track>
	{
		// Token: 0x06000DDF RID: 3551 RVA: 0x00044999 File Offset: 0x00042B99
		internal static void AutoGeneratedStaticCollectObjectsTrack(object o, List<object> collectedObjects)
		{
			((Track)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06000DE0 RID: 3552 RVA: 0x000449A7 File Offset: 0x00042BA7
		private void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			collectedObjects.Add(this.PartyName);
			collectedObjects.Add(this.Culture);
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this.CreationTime, collectedObjects);
			collectedObjects.Add(this._nextLocatable);
		}

		// Token: 0x06000DE1 RID: 3553 RVA: 0x000449DE File Offset: 0x00042BDE
		internal static object AutoGeneratedGetMemberValueIsDetected(object o)
		{
			return ((Track)o).IsDetected;
		}

		// Token: 0x06000DE2 RID: 3554 RVA: 0x000449F0 File Offset: 0x00042BF0
		internal static object AutoGeneratedGetMemberValueIsPointer(object o)
		{
			return ((Track)o).IsPointer;
		}

		// Token: 0x06000DE3 RID: 3555 RVA: 0x00044A02 File Offset: 0x00042C02
		internal static object AutoGeneratedGetMemberValueIsEnemy(object o)
		{
			return ((Track)o).IsEnemy;
		}

		// Token: 0x06000DE4 RID: 3556 RVA: 0x00044A14 File Offset: 0x00042C14
		internal static object AutoGeneratedGetMemberValuePosition(object o)
		{
			return ((Track)o).Position;
		}

		// Token: 0x06000DE5 RID: 3557 RVA: 0x00044A26 File Offset: 0x00042C26
		internal static object AutoGeneratedGetMemberValueDirection(object o)
		{
			return ((Track)o).Direction;
		}

		// Token: 0x06000DE6 RID: 3558 RVA: 0x00044A38 File Offset: 0x00042C38
		internal static object AutoGeneratedGetMemberValuePartyName(object o)
		{
			return ((Track)o).PartyName;
		}

		// Token: 0x06000DE7 RID: 3559 RVA: 0x00044A45 File Offset: 0x00042C45
		internal static object AutoGeneratedGetMemberValueCulture(object o)
		{
			return ((Track)o).Culture;
		}

		// Token: 0x06000DE8 RID: 3560 RVA: 0x00044A52 File Offset: 0x00042C52
		internal static object AutoGeneratedGetMemberValueSpeed(object o)
		{
			return ((Track)o).Speed;
		}

		// Token: 0x06000DE9 RID: 3561 RVA: 0x00044A64 File Offset: 0x00042C64
		internal static object AutoGeneratedGetMemberValueNumberOfAllMembers(object o)
		{
			return ((Track)o).NumberOfAllMembers;
		}

		// Token: 0x06000DEA RID: 3562 RVA: 0x00044A76 File Offset: 0x00042C76
		internal static object AutoGeneratedGetMemberValueNumberOfHealthyMembers(object o)
		{
			return ((Track)o).NumberOfHealthyMembers;
		}

		// Token: 0x06000DEB RID: 3563 RVA: 0x00044A88 File Offset: 0x00042C88
		internal static object AutoGeneratedGetMemberValueNumberOfMenWithHorse(object o)
		{
			return ((Track)o).NumberOfMenWithHorse;
		}

		// Token: 0x06000DEC RID: 3564 RVA: 0x00044A9A File Offset: 0x00042C9A
		internal static object AutoGeneratedGetMemberValueNumberOfMenWithoutHorse(object o)
		{
			return ((Track)o).NumberOfMenWithoutHorse;
		}

		// Token: 0x06000DED RID: 3565 RVA: 0x00044AAC File Offset: 0x00042CAC
		internal static object AutoGeneratedGetMemberValueNumberOfPackAnimals(object o)
		{
			return ((Track)o).NumberOfPackAnimals;
		}

		// Token: 0x06000DEE RID: 3566 RVA: 0x00044ABE File Offset: 0x00042CBE
		internal static object AutoGeneratedGetMemberValueNumberOfPrisoners(object o)
		{
			return ((Track)o).NumberOfPrisoners;
		}

		// Token: 0x06000DEF RID: 3567 RVA: 0x00044AD0 File Offset: 0x00042CD0
		internal static object AutoGeneratedGetMemberValueCreationTime(object o)
		{
			return ((Track)o).CreationTime;
		}

		// Token: 0x06000DF0 RID: 3568 RVA: 0x00044AE2 File Offset: 0x00042CE2
		internal static object AutoGeneratedGetMemberValueLife(object o)
		{
			return ((Track)o).Life;
		}

		// Token: 0x06000DF1 RID: 3569 RVA: 0x00044AF4 File Offset: 0x00042CF4
		internal static object AutoGeneratedGetMemberValuePartyType(object o)
		{
			return ((Track)o).PartyType;
		}

		// Token: 0x06000DF2 RID: 3570 RVA: 0x00044B06 File Offset: 0x00042D06
		internal static object AutoGeneratedGetMemberValue_nextLocatable(object o)
		{
			return ((Track)o)._nextLocatable;
		}

		// Token: 0x1700035D RID: 861
		// (get) Token: 0x06000DF3 RID: 3571 RVA: 0x00044B13 File Offset: 0x00042D13
		public Vec2 GetPosition2D
		{
			get
			{
				return this.Position;
			}
		}

		// Token: 0x1700035E RID: 862
		// (get) Token: 0x06000DF4 RID: 3572 RVA: 0x00044B1B File Offset: 0x00042D1B
		// (set) Token: 0x06000DF5 RID: 3573 RVA: 0x00044B23 File Offset: 0x00042D23
		int ILocatable<Track>.LocatorNodeIndex
		{
			get
			{
				return this._locatorNodeIndex;
			}
			set
			{
				this._locatorNodeIndex = value;
			}
		}

		// Token: 0x1700035F RID: 863
		// (get) Token: 0x06000DF6 RID: 3574 RVA: 0x00044B2C File Offset: 0x00042D2C
		// (set) Token: 0x06000DF7 RID: 3575 RVA: 0x00044B34 File Offset: 0x00042D34
		Track ILocatable<Track>.NextLocatable
		{
			get
			{
				return this._nextLocatable;
			}
			set
			{
				this._nextLocatable = value;
			}
		}

		// Token: 0x06000DF8 RID: 3576 RVA: 0x00044B3D File Offset: 0x00042D3D
		public static Track.PartyTypeEnum GetPartyTypeEnum(MobileParty party)
		{
			if (party.IsBandit)
			{
				return Track.PartyTypeEnum.Bandit;
			}
			if (party.IsVillager)
			{
				return Track.PartyTypeEnum.Villager;
			}
			if (party.IsCaravan)
			{
				return Track.PartyTypeEnum.Caravan;
			}
			if (party.IsLordParty)
			{
				return Track.PartyTypeEnum.Lord;
			}
			return Track.PartyTypeEnum.Default;
		}

		// Token: 0x17000360 RID: 864
		// (get) Token: 0x06000DF9 RID: 3577 RVA: 0x00044B68 File Offset: 0x00042D68
		public int Size
		{
			get
			{
				return this.NumberOfAllMembers + this.NumberOfPrisoners;
			}
		}

		// Token: 0x17000361 RID: 865
		// (get) Token: 0x06000DFA RID: 3578 RVA: 0x00044B77 File Offset: 0x00042D77
		// (set) Token: 0x06000DFB RID: 3579 RVA: 0x00044B7F File Offset: 0x00042D7F
		[SaveableProperty(110)]
		public bool IsDetected { get; set; }

		// Token: 0x17000362 RID: 866
		// (get) Token: 0x06000DFC RID: 3580 RVA: 0x00044B88 File Offset: 0x00042D88
		// (set) Token: 0x06000DFD RID: 3581 RVA: 0x00044B90 File Offset: 0x00042D90
		[SaveableProperty(120)]
		public bool IsPointer { get; set; }

		// Token: 0x17000363 RID: 867
		// (get) Token: 0x06000DFE RID: 3582 RVA: 0x00044B99 File Offset: 0x00042D99
		// (set) Token: 0x06000DFF RID: 3583 RVA: 0x00044BA1 File Offset: 0x00042DA1
		[SaveableProperty(130)]
		public bool IsEnemy { get; set; }

		// Token: 0x17000364 RID: 868
		// (get) Token: 0x06000E00 RID: 3584 RVA: 0x00044BAA File Offset: 0x00042DAA
		public bool IsExpired
		{
			get
			{
				return this.CreationTime.ElapsedHoursUntilNow > this.Life;
			}
		}

		// Token: 0x17000365 RID: 869
		// (get) Token: 0x06000E01 RID: 3585 RVA: 0x00044BBF File Offset: 0x00042DBF
		public bool IsAlive
		{
			get
			{
				return !this.IsExpired;
			}
		}

		// Token: 0x17000366 RID: 870
		// (get) Token: 0x06000E02 RID: 3586 RVA: 0x00044BCA File Offset: 0x00042DCA
		public float Scale
		{
			get
			{
				return Campaign.Current.Models.MapTrackModel.GetTrackScale(this);
			}
		}

		// Token: 0x06000E03 RID: 3587 RVA: 0x00044BE1 File Offset: 0x00042DE1
		public Track()
		{
			this.Reset();
		}

		// Token: 0x06000E04 RID: 3588 RVA: 0x00044BEF File Offset: 0x00042DEF
		public void Reset()
		{
			this.PartyName = TextObject.Empty;
			this.Culture = null;
			this._locatorNodeIndex = -1;
			this._nextLocatable = null;
		}

		// Token: 0x06000E05 RID: 3589 RVA: 0x00044C11 File Offset: 0x00042E11
		[LoadInitializationCallback]
		private void OnLoad()
		{
			this._locatorNodeIndex = -1;
		}

		// Token: 0x040003FB RID: 1019
		[CachedData]
		private int _locatorNodeIndex;

		// Token: 0x040003FC RID: 1020
		[SaveableField(117)]
		private Track _nextLocatable;

		// Token: 0x040003FD RID: 1021
		[SaveableField(0)]
		public Vec2 Position;

		// Token: 0x040003FE RID: 1022
		[SaveableField(1)]
		public float Direction;

		// Token: 0x040003FF RID: 1023
		[SaveableField(10)]
		public TextObject PartyName;

		// Token: 0x04000400 RID: 1024
		[SaveableField(20)]
		public CultureObject Culture;

		// Token: 0x04000401 RID: 1025
		[SaveableField(30)]
		public float Speed;

		// Token: 0x04000402 RID: 1026
		[SaveableField(40)]
		public int NumberOfAllMembers;

		// Token: 0x04000403 RID: 1027
		[SaveableField(50)]
		public int NumberOfHealthyMembers;

		// Token: 0x04000404 RID: 1028
		[SaveableField(60)]
		public int NumberOfMenWithHorse;

		// Token: 0x04000405 RID: 1029
		[SaveableField(70)]
		public int NumberOfMenWithoutHorse;

		// Token: 0x04000406 RID: 1030
		[SaveableField(80)]
		public int NumberOfPackAnimals;

		// Token: 0x04000407 RID: 1031
		[SaveableField(90)]
		public int NumberOfPrisoners;

		// Token: 0x04000408 RID: 1032
		[SaveableField(100)]
		public CampaignTime CreationTime;

		// Token: 0x0400040C RID: 1036
		[SaveableField(140)]
		public float Life;

		// Token: 0x0400040D RID: 1037
		[SaveableField(150)]
		public Track.PartyTypeEnum PartyType;

		// Token: 0x020004BE RID: 1214
		public enum PartyTypeEnum
		{
			// Token: 0x04001485 RID: 5253
			Default,
			// Token: 0x04001486 RID: 5254
			Lord,
			// Token: 0x04001487 RID: 5255
			Bandit,
			// Token: 0x04001488 RID: 5256
			Villager,
			// Token: 0x04001489 RID: 5257
			GarrisonParty,
			// Token: 0x0400148A RID: 5258
			PartyTypesCount,
			// Token: 0x0400148B RID: 5259
			Caravan
		}
	}
}
