#!/bin/bash

# 04_ui_system.c 变量美化脚本
# 将 _DAT_ 变量重命名为有意义的名称

# 定义变量映射
declare -A VAR_MAPPINGS=(
    ["_DAT_180d4a7d8"]="UIRestoreManagerInstance"
    ["_DAT_180d4a7a0"]="UIConfigManagerInstance"
    ["_DAT_180d4a770"]="UISettingsManagerInstance"
    ["_DAT_180d4a6f0"]="UIEnvironmentManagerInstance"
    ["_DAT_180d4a6d8"]="UIDebugManagerInstance"
    ["_DAT_180d4a6b0"]="UIArchiveManagerInstance"
    ["_DAT_180d4a870"]="UIValidatorManagerInstance"
    ["_DAT_180d4a830"]="UIResourceAllocationCalculator"
    ["_DAT_180d4a7e8"]="UIResourceAccessValidator"
    ["_DAT_180d4a7c0"]="UIMemoryOperationProcessor"
    ["_DAT_180d4a788"]="UIDataValidationProcessor"
    ["_DAT_180d4a740"]="UISecurityCheckProcessor"
    ["_DAT_180d4a700"]="UIResourceAllocationProcessor"
    ["_DAT_180d4a6e0"]="UIMemoryAllocationProcessor"
    ["_DAT_180d4a6b8"]="UIBufferManagementProcessor"
    ["_DAT_180d4a968"]="UIEventHandlingProcessor"
    ["_DAT_180d4a948"]="UIInputProcessingProcessor"
    ["_DAT_180d4a920"]="UIStateUpdateProcessor"
    ["_DAT_180d4a8f0"]="UIDataBindingProcessor"
    ["_DAT_180d4a8d0"]="UIThemeSwitcherInstance"
    ["_DAT_180d4a898"]="UIThemeRenderingProcessor"
    ["_DAT_180d4a858"]="UIMemoryPoolIntegrityChecker"
    ["_DAT_180d4a820"]="UIMemoryPoolCounterResetter"
    ["_DAT_180d4a7e0"]="UIMemoryPoolIndexRebuilder"
    ["_DAT_180d4a7b0"]="UIMemoryPoolUsageAnalyzer"
    ["_DAT_180d4a778"]="UIMemoryPoolMetricsUpdater"
    ["_DAT_180d4a750"]="UIMemoryPoolAllocatorInitializer"
    ["_DAT_180d4a708"]="UIMemoryPoolParameterSetter"
    ["_DAT_180d4a958"]="UIReportGenerationProcessor"
    ["_DAT_180d4a928"]="UIPerformanceAnalysisProcessor"
    ["_DAT_180d4a910"]="UIPredictionProcessor"
    ["_DAT_180d4a8c0"]="UIRecommendationProcessor"
    ["_DAT_180d4a8a8"]="UIAuthenticationManagerInstance"
    ["_DAT_180c0c1ec"]="UIInitializationFlag"
    ["_DAT_180c0c1e8"]="UISemaphoreCounter"
    ["_DAT_180c0c1e0"]="UICriticalSection"
    ["_DAT_180c0c200"]="UIRuntimeState"
    ["_DAT_180c0c1fc"]="UIInitializationState"
    ["_DAT_180c0c1f8"]="UIReferenceCounter"
    ["_DAT_180c0c1f0"]="UILockSection"
    ["_DAT_180946f70"]="UIAnimationDataShuffleMask1"
    ["_DAT_180946f90"]="UIAnimationDataShuffleMask2"
    ["_DAT_180946fa0"]="UIAnimationDataShuffleMask3"
    ["_DAT_180946f40"]="UIAnimationDataShuffleMask4"
    ["_DAT_180946f30"]="UIAnimationDataMultiplier"
    ["_DAT_180946f20"]="UIAnimationFrameValue1"
    ["_DAT_180946ed0"]="UIAnimationFrameValueBase"
    ["_DAT_180946ec0"]="UITemporaryUInt1"
    ["_DAT_180946f10"]="UIAnimationFrameValueCalculated"
    ["_DAT_180946f00"]="UIAnimationFrameValue2"
    ["_DAT_180946ef0"]="UIAnimationFrameValueBase2"
    ["_DAT_180946ee0"]="UITemporaryUInt2"
    ["_DAT_180946f50"]="UIAnimationDataShuffleMask5"
    ["_DAT_180946f60"]="UIAnimationDataShuffleMask6"
    ["_DAT_180946f80"]="UIAnimationDataShuffleMask7"
    ["_DAT_180947040"]="UISimdVector1"
    ["_DAT_180947000"]="UISimdVector2"
    ["_DAT_180946fe0"]="UISimdVector3"
    ["_DAT_180946fc0"]="UISimdVector4"
    ["_DAT_180947060"]="UISimdShuffleMask1"
    ["_DAT_180947080"]="UISimdShuffleMask2"
    ["_DAT_1809470a0"]="UISimdShuffleMask3"
    ["_DAT_1809470c0"]="UISimdShuffleMask4"
    ["_DAT_180947510"]="UIMultiplyConstant1"
    ["_DAT_1809473f0"]="UIMultiplyConstant2"
    ["_DAT_180947470"]="UIMultiplyConstant3"
    ["_DAT_180947500"]="UIMultiplyConstant4"
    ["_DAT_180947370"]="UIMultiplyConstant5"
    ["_DAT_1809474b0"]="UIMultiplyConstant6"
    ["_DAT_1809473b0"]="UIMultiplyConstant7"
    ["_DAT_180947430"]="UIMultiplyConstant8"
    ["_DAT_180947330"]="UIMultiplyConstant9"
    ["_DAT_1809474f0"]="UIMultiplyConstant10"
    ["_DAT_1809474d0"]="UIMultiplyConstant11"
    ["_DAT_1809473d0"]="UIMultiplyConstant12"
    ["_DAT_180947450"]="UIMultiplyConstant13"
    ["_DAT_180947390"]="UIMultiplyConstant14"
    ["_DAT_180947310"]="UIMultiplyConstant15"
    ["_DAT_180947490"]="UIMultiplyConstant16"
    ["_DAT_180947410"]="UIMultiplyConstant17"
    ["_DAT_180947350"]="UIMultiplyConstant18"
    ["_DAT_1809474e0"]="UIMultiplyConstant19"
    ["_DAT_1809473e0"]="UIMultiplyConstant20"
    ["_DAT_180947400"]="UIMultiplyConstant21"
    ["_DAT_180947460"]="UIMultiplyConstant22"
    ["_DAT_180947380"]="UIMultiplyConstant23"
    ["_DAT_180947360"]="UIMultiplyConstant24"
    ["_DAT_180947480"]="UIMultiplyConstant25"
    ["_DAT_180947300"]="UIMultiplyConstant26"
    ["_DAT_1809474a0"]="UIMultiplyConstant27"
    ["_DAT_1809473a0"]="UIMultiplyConstant28"
    ["_DAT_180947420"]="UIMultiplyConstant29"
    ["_DAT_1809473c0"]="UIMultiplyConstant30"
    ["_DAT_180947520"]="UIMultiplyConstant31"
)

# 遍历映射并执行替换
for old_var in "${!VAR_MAPPINGS[@]}"; do
    new_var="${VAR_MAPPINGS[$old_var]}"
    echo "替换 $old_var -> $new_var"
    sed -i "s/$old_var/$new_var/g" /dev/shm/mountblade-code/TaleWorlds.Native/src/04_ui_system.c
done

echo "变量美化完成"