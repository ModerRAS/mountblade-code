#!/bin/bash
# 核心引擎函数名批量替换脚本

# 创建临时脚本文件
cat > /tmp/replace_functions.sh << 'EOF'
#!/bin/bash

# 定义源文件
SOURCE_FILE="/dev/shm/mountblade-code/TaleWorlds.Native/src/02_core_engine.c"

# 创建备份
cp "$SOURCE_FILE" "$SOURCE_FILE.backup"

# 函数名替换映射
declare -A FUNCTION_MAP=(
    # 系统初始化相关
    ["FUN_1800382a0"]="CoreEngineInitializeSystemA"
    ["FUN_180038330"]="CoreEngineInitializeSystemB"
    ["FUN_1800383c0"]="CoreEngineInitializeSystemC"
    ["FUN_180038450"]="CoreEngineInitializeSystemD"
    ["FUN_1800391a0"]="CoreEngineInitializeSystemE"
    ["FUN_1800393a0"]="CoreEngineInitializeSystemF"
    ["FUN_1800394a0"]="CoreEngineInitializeSystemG"
    ["FUN_1800395a0"]="CoreEngineInitializeSystemH"
    ["FUN_1800396a0"]="CoreEngineInitializeSystemI"
    ["FUN_1800397a0"]="CoreEngineInitializeSystemJ"
    ["FUN_1800398a0"]="CoreEngineInitializeSystemK"
    ["FUN_1800399a0"]="CoreEngineInitializeSystemL"
    ["FUN_180039aa0"]="CoreEngineInitializeSystemM"
    ["FUN_180039bb0"]="CoreEngineInitializeSystemN"
    ["FUN_180039cb0"]="CoreEngineInitializeSystemO"
    ["FUN_180039db0"]="CoreEngineInitializeSystemP"
    ["FUN_180039eb0"]="CoreEngineInitializeSystemQ"
    ["FUN_180039fb0"]="CoreEngineInitializeSystemR"
    ["FUN_1800404b0"]="CoreEngineInitializeSystemS"
    ["FUN_1800405b0"]="CoreEngineInitializeSystemT"
    ["FUN_1800414e0"]="CoreEngineInitializeSystemU"
    ["FUN_1800415e0"]="CoreEngineInitializeSystemV"
    ["FUN_180041fa0"]="CoreEngineInitializeSystemW"
    ["FUN_180041fd0"]="CoreEngineInitializeSystemX"
    ["FUN_1800430d0"]="CoreEngineInitializeSystemY"
    ["FUN_1800431d0"]="CoreEngineInitializeSystemZ"
    ["FUN_1800432d0"]="CoreEngineInitializeSystemAA"
    ["FUN_1800433d0"]="CoreEngineInitializeSystemBB"
    ["FUN_1800434d0"]="CoreEngineInitializeSystemCC"
    ["FUN_180043690"]="CoreEngineInitializeSystemDD"
    ["FUN_180043c30"]="CoreEngineInitializeSystemEE"
    ["FUN_180044a50"]="CoreEngineInitializeSystemFF"
    ["FUN_180044dc0"]="CoreEngineInitializeSystemGG"
    ["FUN_180045380"]="CoreEngineInitializeSystemHH"
    ["FUN_180045af0"]="CoreEngineInitializeSystemII"
    ["FUN_180046130"]="CoreEngineInitializeSystemJJ"
    ["FUN_180046160"]="CoreEngineInitializeSystemKK"
    ["FUN_180046190"]="CoreEngineInitializeSystemLL"
    ["FUN_180046240"]="CoreEngineInitializeSystemMM"
    ["FUN_180046444"]="CoreEngineInitializeSystemNN"
    ["FUN_180046840"]="CoreEngineInitializeSystemOO"
    ["FUN_180046860"]="CoreEngineInitializeSystemPP"
    ["FUN_180046b10"]="CoreEngineInitializeSystemQQ"
    ["FUN_180046b80"]="CoreEngineInitializeSystemRR"
    ["FUN_180046ca0"]="CoreEngineInitializeSystemSS"
    ["FUN_180046e20"]="CoreEngineInitializeSystemTT"
    ["FUN_180047e10"]="CoreEngineInitializeSystemUU"
    ["FUN_180047e40"]="CoreEngineInitializeSystemVV"
    ["FUN_180047e70"]="CoreEngineInitializeSystemWW"
    ["FUN_180047fc0"]="CoreEngineInitializeSystemXX"
    ["FUN_180048910"]="CoreEngineInitializeSystemYY"
    ["FUN_180048980"]="CoreEngineInitializeSystemZZ"
    ["FUN_180048a20"]="CoreEngineInitializeSystemAAA"
    ["FUN_180048a50"]="CoreEngineInitializeSystemBBB"
    ["FUN_180048a90"]="CoreEngineInitializeSystemCCC"
    ["FUN_180048ee0"]="CoreEngineInitializeSystemDDD"
    ["FUN_180049010"]="CoreEngineInitializeSystemEEE"
    ["FUN_180049110"]="CoreEngineInitializeSystemFFF"
    ["FUN_1800491b0"]="CoreEngineInitializeSystemGGG"
    ["FUN_180049470"]="CoreEngineInitializeSystemHHH"
    ["FUN_1800495d0"]="CoreEngineInitializeSystemIII"
    ["FUN_1800496b0"]="CoreEngineInitializeSystemJJJ"
    ["FUN_180049910"]="CoreEngineInitializeSystemKKK"
    ["FUN_180049931"]="CoreEngineInitializeSystemLLL"
    ["FUN_180049956"]="CoreEngineInitializeSystemMMM"
    ["FUN_180049970"]="CoreEngineInitializeSystemNNN"
    ["FUN_1800499c0"]="CoreEngineInitializeSystemOOO"
    ["FUN_180049b30"]="CoreEngineInitializeSystemPPP"
    ["FUN_180049bb0"]="CoreEngineInitializeSystemQQQ"
    ["FUN_180049bf0"]="CoreEngineInitializeSystemRRR"
    ["FUN_180049c70"]="CoreEngineInitializeSystemSSS"
    ["FUN_180049c8f"]="CoreEngineInitializeSystemTTT"
    ["FUN_180049cb4"]="CoreEngineInitializeSystemUUU"
    ["FUN_180049cd0"]="CoreEngineInitializeSystemVVV"
    ["FUN_180049d20"]="CoreEngineInitializeSystemWWW"
    ["FUN_180049eb0"]="CoreEngineInitializeSystemXXX"
    ["FUN_180049f30"]="CoreEngineInitializeSystemYYY"
    ["FUN_180049fd0"]="CoreEngineInitializeSystemZZZ"
    ["FUN_180050b00"]="CoreEngineInitializeSystemAAAA"
    ["FUN_180050b30"]="CoreEngineInitializeSystemBBBB"
    ["FUN_180051150"]="CoreEngineInitializeSystemCCCC"
    ["FUN_180051d00"]="CoreEngineInitializeSystemDDDD"
    ["FUN_180051d40"]="CoreEngineInitializeSystemEEEE"
    ["FUN_180051de4"]="CoreEngineInitializeSystemFFFF"
    ["FUN_180051e13"]="CoreEngineInitializeSystemGGGG"
    ["FUN_180051e74"]="CoreEngineInitializeSystemHHHH"
    ["FUN_180051eef"]="CoreEngineInitializeSystemIIII"
    ["FUN_180051f00"]="CoreEngineInitializeSystemJJJJ"
    ["FUN_1800524c0"]="CoreEngineInitializeSystemKKKK"
    ["FUN_180052940"]="CoreEngineInitializeSystemLLLL"
    ["FUN_180052ef0"]="CoreEngineInitializeSystemMMMM"
    ["FUN_180053200"]="CoreEngineInitializeSystemNNNN"
    ["FUN_1800533d0"]="CoreEngineInitializeSystemOOOO"
    ["FUN_180054120"]="CoreEngineInitializeSystemPPPP"
    ["FUN_180054360"]="CoreEngineInitializeSystemQQQQ"
    ["FUN_1800547b0"]="CoreEngineInitializeSystemRRRR"
    ["FUN_180055050"]="CoreEngineInitializeSystemSSSS"
    ["FUN_180055e10"]="CoreEngineInitializeSystemTTTT"
    ["FUN_180055e30"]="CoreEngineInitializeSystemUUUU"
    ["FUN_180055e60"]="CoreEngineInitializeSystemVVVV"
    ["FUN_180055e80"]="CoreEngineInitializeSystemWWWW"
    ["FUN_180055ed0"]="CoreEngineInitializeSystemXXXX"
    ["FUN_180055f20"]="CoreEngineInitializeSystemYYYY"
    ["FUN_180055f50"]="CoreEngineInitializeSystemZZZZ"
    ["FUN_180055f70"]="CoreEngineInitializeSystemAAAAA"
    ["FUN_180055fa0"]="CoreEngineInitializeSystemBBBBB"
    ["FUN_180056150"]="CoreEngineInitializeSystemCCCCC"
    ["FUN_180056410"]="CoreEngineInitializeSystemDDDDD"
    ["FUN_1800565f0"]="CoreEngineInitializeSystemEEEEE"
    ["FUN_1800567c0"]="CoreEngineInitializeSystemFFFFF"
    ["FUN_180056810"]="CoreEngineInitializeSystemGGGGG"
    ["FUN_180056b30"]="CoreEngineInitializeSystemHHHHH"
    ["FUN_180056c50"]="CoreEngineInitializeSystemIIIII"
    ["FUN_180057010"]="CoreEngineInitializeSystemJJJJJ"
    ["FUN_180057029"]="CoreEngineInitializeSystemKKKKK"
    ["FUN_180057062"]="CoreEngineInitializeSystemLLLLL"
    ["FUN_180057090"]="CoreEngineInitializeSystemMMMMM"
    ["FUN_180057110"]="CoreEngineInitializeSystemNNNNN"
    ["FUN_180057170"]="CoreEngineInitializeSystemOOOOO"
    ["FUN_1800571e0"]="CoreEngineInitializeSystemPPPPP"
    ["FUN_1800572d0"]="CoreEngineInitializeSystemQQQQQ"
    ["FUN_1800572e6"]="CoreEngineInitializeSystemRRRRR"
    ["FUN_180057314"]="CoreEngineInitializeSystemSSSSS"
    ["FUN_180057340"]="CoreEngineInitializeSystemTTTTT"
    ["FUN_18005736b"]="CoreEngineInitializeSystemUUUUU"
    ["FUN_180057446"]="CoreEngineInitializeSystemVVVVV"
    ["FUN_180057479"]="CoreEngineInitializeSystemWWWWW"
    ["FUN_180057490"]="CoreEngineInitializeSystemXXXXX"
    ["FUN_1800574b0"]="CoreEngineInitializeSystemYYYYY"
    ["FUN_180057510"]="CoreEngineInitializeSystemZZZZZ"
    ["FUN_180057530"]="CoreEngineInitializeSystemAAAAAA"
    ["FUN_180057550"]="CoreEngineInitializeSystemBBBBBB"
    ["FUN_180057556"]="CoreEngineInitializeSystemCCCCCC"
    ["FUN_180057580"]="CoreEngineInitializeSystemDDDDDD"
    ["FUN_1800575b6"]="CoreEngineInitializeSystemEEEEEE"
    ["FUN_1800575d4"]="CoreEngineInitializeSystemFFFFFF"
    ["FUN_1800575f0"]="CoreEngineInitializeSystemGGGGGG"
    ["FUN_180057610"]="CoreEngineInitializeSystemHHHHHH"
    ["FUN_180057680"]="CoreEngineInitializeSystemIIIIII"
    ["FUN_180057730"]="CoreEngineInitializeSystemJJJJJJ"
    ["FUN_180057790"]="CoreEngineInitializeSystemKKKKKK"
    ["FUN_180057796"]="CoreEngineInitializeSystemLLLLLL"
    ["FUN_1800577c0"]="CoreEngineInitializeSystemMMMMMM"
    ["FUN_1800577f6"]="CoreEngineInitializeSystemNNNNNN"
    ["FUN_180057814"]="CoreEngineInitializeSystemOOOOOO"
    ["FUN_180057830"]="CoreEngineInitializeSystemPPPPPP"
)

# 执行替换
for old_name in "${!FUNCTION_MAP[@]}"; do
    new_name="${FUNCTION_MAP[$old_name]}"
    echo "替换: $old_name -> $new_name"
    sed -i "s/$old_name/$new_name/g" "$SOURCE_FILE"
done

echo "替换完成！"
EOF

# 使脚本可执行并运行
chmod +x /tmp/replace_functions.sh
/tmp/replace_functions.sh

# 清理临时文件
rm -f /tmp/replace_functions.sh