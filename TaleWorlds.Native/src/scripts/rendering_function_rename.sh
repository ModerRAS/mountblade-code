#!/bin/bash

# 渲染系统函数美化脚本
# 用于批量重命名03_rendering.c中的FUN_函数

# 定义函数映射关系
declare -A function_mapping=(
    # 渲染上下文和设备管理
    ["FUN_1804460c0"]="CreateRenderContext"
    ["FUN_1804460f0"]="InitializeRenderDevice"
    ["FUN_180446120"]="SetupRenderPipeline"
    ["FUN_180446160"]="ConfigureRenderBackend"
    ["FUN_1804461b0"]="CreateSwapChain"
    ["FUN_180446430"]="CreateCommandQueue"
    ["FUN_180446480"]="CreateCommandAllocator"
    ["FUN_180446610"]="CreateCommandList"
    ["FUN_180446650"]="CreateFence"
    ["FUN_180446690"]="CreateRenderTargetView"
    ["FUN_180446760"]="CreateDepthStencilView"
    ["FUN_180446810"]="CreateVertexBuffer"
    ["FUN_180446960"]="CreateIndexBuffer"
    ["FUN_180446a60"]="CreateConstantBuffer"
    ["FUN_180446b20"]="CreateShaderResourceView"
    ["FUN_180446ba0"]="CreateSamplerState"
    ["FUN_180446ca0"]="CreateBlendState"
    ["FUN_180446d20"]="CreateRasterizerState"
    ["FUN_180446dc0"]="CreateDepthStencilState"
    ["FUN_180446e70"]="CreateInputLayout"
    ["FUN_180446f00"]="CreateVertexShader"
    ["FUN_180446fa0"]="CreatePixelShader"
    ["FUN_180446fd0"]="CreateGeometryShader"
    ["FUN_180447030"]="CreateComputeShader"
    ["FUN_1804470d0"]="CreateHullShader"
    ["FUN_180447120"]="CreateDomainShader"
    ["FUN_1804471a0"]="CompileShader"
    ["FUN_180447220"]="LinkShaders"
    ["FUN_1804472c0"]="SetShaderConstants"
    ["FUN_180447320"]="SetShaderResources"
    ["FUN_180447360"]="SetShaderSamplers"
    ["FUN_1804473b0"]="SetVertexBuffers"
    ["FUN_180447430"]="SetIndexBuffer"
    ["FUN_1804475e0"]="SetPrimitiveTopology"
    ["FUN_180447660"]="SetViewport"
    ["FUN_180447710"]="SetScissorRect"
    ["FUN_1804477f0"]="SetRenderTargets"
    ["FUN_180447850"]="SetDepthStencilState"
    ["FUN_180447990"]="SetBlendState"
    ["FUN_180447b80"]="SetRasterizerState"
    ["FUN_180447c00"]="SetPipelineState"
    ["FUN_180447ca0"]="DrawIndexed"
    ["FUN_180447d40"]="Draw"
    ["FUN_180447de0"]="DrawInstanced"
    ["FUN_180447e10"]="DrawIndexedInstanced"
    ["FUN_180447e40"]="DispatchCompute"
    ["FUN_180447f70"]="ClearRenderTarget"
    ["FUN_180448110"]="ClearDepthStencil"
    ["FUN_180448420"]="PresentFrame"
    ["FUN_180448470"]="WaitForFence"
    ["FUN_1804484c0"]="SignalFence"
    ["FUN_180448540"]="FlushCommandQueue"
    ["FUN_1804485c0"]="ExecuteCommandList"
    ["FUN_1804489a0"]="ResetCommandList"
    ["FUN_180448d90"]="CloseCommandList"
    ["FUN_180448df0"]="ResetCommandAllocator"
    ["FUN_180448e50"]="ResizeBuffers"
    ["FUN_180448ea0"]="ResizeTarget"
    ["FUN_180448f00"]="GetSwapChainBuffer"
    ["FUN_180448f50"]="GetDevice"
    ["FUN_180448fb0"]="GetContext"
    ["FUN_180449000"]="GetFactory"
    ["FUN_180449070"]="GetAdapter"
    ["FUN_1804491c0"]="GetOutput"
    ["FUN_180449230"]="CreateTexture2D"
    ["FUN_180449300"]="CreateTexture3D"
    ["FUN_1804496f0"]="CreateBuffer"
    ["FUN_180449780"]="MapResource"
    ["FUN_180449850"]="UnmapResource"
    ["FUN_1804498f0"]="UpdateSubresource"
    ["FUN_180449930"]="CopyResource"
    ["FUN_180449a00"]="CopySubresourceRegion"
    ["FUN_180449a80"]="ResolveSubresource"
    ["FUN_180449c00"]="GenerateMips"
    ["FUN_180449d70"]="CreateQuery"
    ["FUN_18044a080"]="CreatePredicate"
    ["FUN_18044a3a0"]="CreateCounter"
    ["FUN_18044a590"]="BeginQuery"
    ["FUN_18044a810"]="EndQuery"
    ["FUN_18044aad0"]="GetQueryData"
    ["FUN_18044ab80"]="SetPredication"
    ["FUN_18044ac20"]="SetMarker"
    ["FUN_18044ad90"]="BeginEvent"
    ["FUN_18044af00"]="EndEvent"
    ["FUN_18044afb0"]="SetTextureStageState"
    ["FUN_18044b010"]="SetSamplerState"
    ["FUN_18044b080"]="SetRenderState"
    ["FUN_18044b110"]="SetTexture"
    ["FUN_18044b1d0"]="SetVertexDeclaration"
    ["FUN_18044b280"]="SetVertexShaderConstantF"
    ["FUN_18044b3d0"]="SetVertexShaderConstantI"
    ["FUN_18044b4f0"]="SetVertexShaderConstantB"
    ["FUN_18044b580"]="SetPixelShaderConstantF"
    ["FUN_18044b610"]="SetPixelShaderConstantI"
    ["FUN_18044b6e0"]="SetPixelShaderConstantB"
    ["FUN_18044b700"]="SetStreamSource"
    ["FUN_18044b7a0"]="SetStreamSourceFreq"
    ["FUN_18044b910"]="SetIndices"
    ["FUN_18044baf0"]="CreateVertexDeclaration"
    ["FUN_18044bc50"]="SetVertexDeclaration"
    ["FUN_18044be30"]="GetVertexDeclaration"
    ["FUN_18044c0d0"]="CreateVertexShader"
    ["FUN_18044c190"]="CreatePixelShader"
    ["FUN_18044c420"]="SetVertexShader"
    ["FUN_18044c840"]="SetPixelShader"
    ["FUN_18044c9c0"]="SetFVF"
    ["FUN_18044cb80"]="CreateVertexShader"
    ["FUN_18044cd30"]="CreatePixelShader"
    ["FUN_18044ce10"]="DeleteShader"
    ["FUN_18044cf20"]="SetShaderConstant"
    ["FUN_18044d0b0"]="GetShaderConstant"
    ["FUN_18044d0f0"]="SetShaderResource"
    ["FUN_18044d130"]="GetShaderResource"
    ["FUN_18044d2d0"]="SetSampler"
    ["FUN_18044d340"]="GetSampler"
    ["FUN_18044d450"]="SetRenderState"
    ["FUN_18044d4f0"]="GetRenderState"
    ["FUN_18044d570"]="SetTextureStageState"
    ["FUN_18044d680"]="GetTextureStageState"
    ["FUN_18044d910"]="SetSamplerState"
    ["FUN_18044da90"]="GetSamplerState"
    ["FUN_18044db70"]="SetScissorRect"
    ["FUN_18044dc10"]="GetScissorRect"
    ["FUN_18044df40"]="SetViewport"
    ["FUN_18044e000"]="GetViewport"
    ["FUN_18044e0d0"]="SetClipPlane"
    ["FUN_18044e180"]="GetClipPlane"
    ["FUN_18044e2b0"]="SetMaterial"
    ["FUN_18044e3b0"]="GetMaterial"
    ["FUN_18044e4f0"]="SetLight"
    ["FUN_18044e590"]="GetLight"
    ["FUN_18044e620"]="SetLightEnable"
    ["FUN_18044e650"]="GetLightEnable"
    ["FUN_18044e890"]="SetTransform"
    ["FUN_18044ead0"]="GetTransform"
    ["FUN_18044ed20"]="MultiplyTransform"
    ["FUN_18044edc0"]="SetViewport"
    ["FUN_18044efd0"]="GetViewport"
    ["FUN_18044f210"]="SetScissorRect"
    ["FUN_18044f370"]="GetScissorRect"
    ["FUN_18044f780"]="SetClipPlane"
    ["FUN_18044f880"]="GetClipPlane"
    ["FUN_18044fa00"]="SetRenderState"
    ["FUN_18044ffa0"]="GetRenderState"
    ["FUN_180450070"]="SetTextureStageState"
    ["FUN_180450140"]="GetTextureStageState"
    ["FUN_1804501c0"]="SetSamplerState"
    ["FUN_1804502d0"]="GetSamplerState"
    ["FUN_180450360"]="SetTexture"
    ["FUN_1804508a0"]="GetTexture"
    ["FUN_1804509e0"]="SetTextureStageState"
    ["FUN_180450a20"]="GetTextureStageState"
    ["FUN_180450ba0"]="SetSamplerState"
    ["FUN_180450d90"]="GetSamplerState"
    ["FUN_1804510a0"]="SetPixelShader"
    ["FUN_1804511e0"]="GetPixelShader"
    ["FUN_1804512f0"]="SetVertexShader"
    ["FUN_180451770"]="GetVertexShader"
    ["FUN_1804517c0"]="SetVertexDeclaration"
    ["FUN_180451890"]="GetVertexDeclaration"
    ["FUN_1804519d0"]="SetVertexShaderConstantF"
    ["FUN_180451bd0"]="GetVertexShaderConstantF"
    ["FUN_180451ca0"]="SetVertexShaderConstantI"
    ["FUN_180451d20"]="GetVertexShaderConstantI"
    ["FUN_180451da0"]="SetVertexShaderConstantB"
    ["FUN_180451e30"]="GetVertexShaderConstantB"
    ["FUN_1804520a0"]="SetPixelShaderConstantF"
    ["FUN_1804522d0"]="GetPixelShaderConstantF"
    ["FUN_180452500"]="SetPixelShaderConstantI"
    ["FUN_180452630"]="GetPixelShaderConstantI"
    ["FUN_180452f40"]="SetPixelShaderConstantB"
    ["FUN_180452fa0"]="GetPixelShaderConstantB"
    ["FUN_1804530a0"]="SetStreamSource"
    ["FUN_180453140"]="GetStreamSource"
    ["FUN_1804531d0"]="SetStreamSourceFreq"
    ["FUN_180453300"]="GetStreamSourceFreq"
    ["FUN_1804534d0"]="SetIndices"
    ["FUN_180453580"]="GetIndices"
    ["FUN_180453750"]="CreateVertexDeclaration"
    ["FUN_1804537b0"]="SetVertexDeclaration"
    ["FUN_1804537e0"]="GetVertexDeclaration"
    ["FUN_180453810"]="SetFVF"
    ["FUN_180453860"]="GetFVF"
    ["FUN_1804538b0"]="SetVertexShader"
    ["FUN_1804539b0"]="GetVertexShader"
    ["FUN_180453b60"]="SetPixelShader"
    ["FUN_180453cb0"]="GetPixelShader"
    ["FUN_180453d60"]="SetGeometryShader"
    ["FUN_180453de0"]="GetGeometryShader"
    ["FUN_180453e40"]="SetStreamOutput"
    ["FUN_180453f70"]="GetStreamOutput"
    ["FUN_180453f90"]="SetPredicate"
    ["FUN_180454070"]="GetPredicate"
    ["FUN_1804541a0"]="SetMarker"
    ["FUN_180454230"]="BeginEvent"
    ["FUN_180454300"]="EndEvent"
    ["FUN_1804543f0"]="SetRenderState"
    ["FUN_180454d00"]="GetRenderState"
    ["FUN_180454d80"]="SetTexture"
    ["FUN_180454ea0"]="GetTexture"
    ["FUN_180454ff0"]="SetTextureStageState"
    ["FUN_180455090"]="GetTextureStageState"
    ["FUN_180455250"]="SetSamplerState"
    ["FUN_180455340"]="GetSamplerState"
    ["FUN_180455430"]="SetViewport"
    ["FUN_1804555a0"]="GetViewport"
    ["FUN_1804557b0"]="SetScissorRect"
    ["FUN_180455980"]="GetScissorRect"
    ["FUN_1804559d0"]="SetClipPlane"
    ["FUN_180455a50"]="GetClipPlane"
    ["FUN_1804354c0"]="SetMaterial"
    ["FUN_1804355b0"]="GetMaterial"
    ["FUN_180435630"]="SetLight"
    ["FUN_180435690"]="GetLight"
    ["FUN_1804357a0"]="SetLightEnable"
    ["FUN_180435860"]="GetLightEnable"
    ["FUN_1804359d0"]="SetTransform"
    ["FUN_180435a80"]="GetTransform"
    ["FUN_180435d10"]="MultiplyTransform"
    ["FUN_180435e20"]="SetViewport"
    ["FUN_180435f40"]="GetViewport"
    ["FUN_180435f90"]="SetScissorRect"
    ["FUN_180435ff0"]="GetScissorRect"
    ["FUN_180436030"]="SetClipPlane"
    ["FUN_180436160"]="GetClipPlane"
    ["FUN_1804362a0"]="SetRenderState"
    ["FUN_1804369d0"]="GetRenderState"
    ["FUN_180436a00"]="SetTextureStageState"
    ["FUN_180436a50"]="GetTextureStageState"
    ["FUN_180436ae0"]="SetSamplerState"
    ["FUN_180436bb0"]="GetSamplerState"
    ["FUN_180436bf0"]="SetTexture"
    ["FUN_180436c30"]="GetTexture"
    ["FUN_180436d00"]="SetPixelShader"
    ["FUN_180436da0"]="GetPixelShader"
    ["FUN_180436f20"]="SetVertexShader"
    ["FUN_180436fd0"]="GetVertexShader"
    ["FUN_180437050"]="SetVertexDeclaration"
    ["FUN_180437110"]="GetVertexDeclaration"
    ["FUN_180437290"]="SetVertexShaderConstantF"
    ["FUN_1804372e0"]="GetVertexShaderConstantF"
    ["FUN_180437320"]="SetVertexShaderConstantI"
    ["FUN_1804373a0"]="GetVertexShaderConstantI"
    ["FUN_180437460"]="SetVertexShaderConstantB"
    ["FUN_1804374c0"]="GetVertexShaderConstantB"
    ["FUN_180437560"]="SetPixelShaderConstantF"
    ["FUN_1804375f0"]="GetPixelShaderConstantF"
    ["FUN_180437680"]="SetPixelShaderConstantI"
    ["FUN_1804377b0"]="GetPixelShaderConstantI"
    ["FUN_1804378e0"]="SetPixelShaderConstantB"
    ["FUN_18031c260"]="GetPixelShaderConstantB"
    ["FUN_18031c300"]="SetStreamSource"
    ["FUN_180317e00"]="GetStreamSource"
    ["FUN_18031ccb0"]="SetStreamSourceFreq"
    ["FUN_18031d520"]="GetStreamSourceFreq"
    ["FUN_1803216f0"]="SetIndices"
    ["FUN_180321570"]="GetIndices"
    ["FUN_18033d370"]="CreateVertexDeclaration"
    ["FUN_18033d250"]="SetVertexDeclaration"
    ["FUN_18033d080"]="GetVertexDeclaration"
    ["FUN_18033d170"]="SetFVF"
    ["FUN_18033ced0"]="GetFVF"
    ["FUN_18033cd80"]="SetVertexShader"
    ["FUN_18033cc90"]="GetVertexShader"
    ["FUN_180360210"]="SetPixelShader"
    ["FUN_180380510"]="GetPixelShader"
    ["FUN_1803805e0"]="SetGeometryShader"
    ["FUN_180380430"]="GetGeometryShader"
    ["FUN_1803802e0"]="SetStreamOutput"
    ["FUN_1803800d0"]="GetStreamOutput"
    ["FUN_180380200"]="SetPredicate"
    ["FUN_18037ac70"]="GetPredicate"
    ["FUN_18037ad00"]="SetMarker"
    ["FUN_180388290"]="BeginEvent"
    ["FUN_180387ed0"]="EndEvent"
    ["FUN_180388040"]="SetRenderState"
    ["FUN_180388120"]="GetRenderState"
    ["FUN_1803896b0"]="SetTexture"
    ["FUN_18038a340"]="GetTexture"
    ["FUN_18038a630"]="SetTextureStageState"
    ["FUN_1804069d0"]="GetTextureStageState"
    ["FUN_180407960"]="SetSamplerState"
    ["FUN_18041b4d0"]="GetSamplerState"
    ["FUN_180242610"]="InitializeRenderSystem"
    ["FUN_1802b6e50"]="ProcessRenderQueue"
    ["FUN_18062b1e0"]="AllocateRenderMemory"
    ["FUN_180272880"]="InitializeRenderBuffer"
    ["FUN_1802711e0"]="CopyRenderData"
    ["FUN_180627be0"]="SetRenderProperty"
    ["FUN_180241a50"]="SetRenderPropertyExtended"
)

# 遍历所有映射并执行替换
for old_name in "${!function_mapping[@]}"; do
    new_name="${function_mapping[$old_name]}"
    
    # 使用sed进行替换
    sed -i "s/\b$old_name\b/$new_name/g" "03_rendering.c"
    
    echo "重命名: $old_name -> $new_name"
done

echo "函数重命名完成！"