#!/bin/bash

# UI系统函数重命名脚本
# 用于将04_ui_system.c中的FUN_函数重命名为有意义的名称

# 定义函数映射
declare -A function_mappings=(
    # 初始化相关函数
    ["FUN_18066f715"]="InitializeUISystem"
    ["FUN_18066f810"]="SetupUIComponents"
    ["FUN_18066f834"]="ConfigureUIRenderSettings"
    ["FUN_18066f94e"]="InitializeUIEventSystem"
    ["FUN_180670510"]="CreateUIWindowManager"
    ["FUN_180670526"]="SetupUIInputHandler"
    ["FUN_1806707c6"]="ResetUIBuffers"
    ["FUN_1806708fb"]="InitializeUIThemeSystem"
    ["FUN_180670a01"]="SetupUIFontManager"
    ["FUN_180670ac1"]="InitializeUITextureSystem"
    ["FUN_180670aec"]="ConfigureUIShaderProgram"
    ["FUN_180670b00"]="SetupUIVertexBuffer"
    ["FUN_180670b17"]="SetupUIIndexBuffer"
    ["FUN_180670b1e"]="InitializeUIAnimationSystem"
    ["FUN_180670bda"]="CreateUILayoutManager"
    ["FUN_180670c31"]="InitializeUIStyleManager"
    ["FUN_180670c62"]="SetupUIEventDispatcher"
    ["FUN_180670c6a"]="InitializeUICursorSystem"
    ["FUN_180670c6f"]="SetupUIFocusManager"
    ["FUN_180670ede"]="CreateUIWidgetFactory"
    ["FUN_180670f6b"]="InitializeUIDialogSystem"
    ["FUN_180670ffb"]="SetupUITooltipHandler"
    ["FUN_18067106d"]="InitializeUISoundSystem"
    ["FUN_180671080"]="ConfigureUIGestureRecognizer"
    ["FUN_1806710a5"]="SetupUITouchHandler"
    ["FUN_1806712a0"]="InitializeUIMemoryPool"
    ["FUN_1806712b0"]="CreateUIThreadManager"
    ["FUN_1806721d0"]="ProcessUIWindowCreation"
    ["FUN_1806725c0"]="HandleUIWindowUpdate"
    ["FUN_180672a50"]="ProcessUIWindowRender"
    ["FUN_180672da0"]="HandleUIWindowDestroy"
    ["FUN_180673f50"]="ProcessUIWidgetCreation"
    ["FUN_180674040"]="HandleUIWidgetUpdate"
    ["FUN_180674120"]="ProcessUIWidgetRender"
    ["FUN_180674930"]="InitializeUIResourceCache"
    ["FUN_180675320"]="ProcessUITextureLoading"
    ["FUN_180675430"]="InitializeUIFontCache"
    ["FUN_180675570"]="ProcessUIShaderCompilation"
    ["FUN_1806755af"]="HandleUIShaderUpdate"
    ["FUN_1806757f1"]="InitializeUIAnimationCache"
    ["FUN_180675810"]="ProcessUIAnimationUpdate"
    ["FUN_180675b40"]="HandleUILayoutCalculation"
    ["FUN_180675b7b"]="InitializeUIProfiler"
    ["FUN_180675dd9"]="InitializeUIDebugRenderer"
    ["FUN_180675df0"]="ProcessUIEventHandling"
    ["FUN_180675e28"]="HandleUIInputProcessing"
    ["FUN_180675f56"]="InitializeUIGarbageCollector"
    ["FUN_180675f70"]="ProcessUIMemoryCleanup"
    ["FUN_180675fa7"]="InitializeUITaskScheduler"
    ["FUN_1806760cf"]="ProcessUIResourceLoading"
    ["FUN_1806760f0"]="HandleUITextureUpload"
    ["FUN_180676320"]="InitializeUIRenderDevice"
    ["FUN_180676490"]="ProcessUIVertexBufferUpdate"
    ["FUN_180676700"]="HandleUIIndexBufferUpdate"
    ["FUN_180676aa0"]="ProcessUIUniformBufferUpdate"
    ["FUN_180676d10"]="HandleUIFrameBufferUpdate"
    ["FUN_180676df0"]="ProcessUIRenderTargetUpdate"
    ["FUN_180676f40"]="HandleUIRenderStateUpdate"
    ["FUN_180677300"]="ProcessUIViewportUpdate"
    ["FUN_180677530"]="HandleUIProjectionUpdate"
    ["FUN_1806777a0"]="ProcessUICameraUpdate"
    ["FUN_180677ae0"]="HandleUILightingUpdate"
    ["FUN_180677eb0"]="ProcessUIMaterialUpdate"
    ["FUN_180677fc0"]="HandleUIMeshUpdate"
    ["FUN_1806780c0"]="ProcessUITransformUpdate"
    ["FUN_1806782c0"]="HandleUIMatrixUpdate"
    ["FUN_180678430"]="ProcessUIVectorUpdate"
    ["FUN_180678540"]="HandleUIColorUpdate"
    ["FUN_180678810"]="ProcessUIShaderProgramUpdate"
    ["FUN_1806789c0"]="HandleUITextureSamplerUpdate"
    ["FUN_180678b10"]="ProcessUIRenderPipelineUpdate"
    ["FUN_180678bc0"]="HandleUICommandBufferUpdate"
    ["FUN_180678e20"]="ProcessUIDescriptorSetUpdate"
    ["FUN_180678ef0"]="HandleUIPipelineLayoutUpdate"
    ["FUN_180678fc0"]="ProcessUIRenderPassUpdate"
    ["FUN_1806790b0"]="HandleUIFramebufferUpdate"
    ["FUN_180679210"]="ProcessUIAttachmentUpdate"
    ["FUN_180679310"]="HandleUISubpassUpdate"
    ["FUN_180679480"]="ProcessUIDependencyUpdate"
    ["FUN_1806795f0"]="HandleUISynchronizationUpdate"
    ["FUN_1806796f0"]="ProcessUIBarrierUpdate"
    ["FUN_1806799b0"]="HandleUISemaphoreUpdate"
    ["FUN_180679ca0"]="ProcessUIFenceUpdate"
    ["FUN_180679d30"]="HandleUIQueueUpdate"
    ["FUN_18067c470"]="InitializeUIDevice"
    ["FUN_1806905c0"]="ProcessUIPhysicalDevice"
    ["FUN_180690700"]="HandleUISurfaceUpdate"
    ["FUN_1806917c0"]="ProcessUISwapchainUpdate"
    ["FUN_180691db0"]="HandleUIImageViewUpdate"
    ["FUN_1806922f0"]="ProcessUIImageUpdate"
    ["FUN_1806935a0"]="HandleUIBufferUpdate"
    ["FUN_180694010"]="InitializeUIMemoryAllocation"
    ["FUN_180694040"]="ProcessUIDescriptorPool"
    ["FUN_180694c40"]="HandleUICommandPool"
    ["FUN_180695530"]="InitializeUIQueryPool"
    ["FUN_180695bf0"]="ProcessUIAccelerationStructure"
    ["FUN_180695c4d"]="HandleUIRayTracing"
    ["FUN_180695f0f"]="ProcessUIComputeShader"
    ["FUN_180695f70"]="HandleUITessellationShader"
    ["FUN_1806961a0"]="ProcessUIGeometryShader"
    ["FUN_180696370"]="HandleUIFragmentShader"
    ["FUN_180696540"]="ProcessUIVertexShader"
    ["FUN_180696710"]="HandleUIShaderStage"
    ["FUN_1806968e0"]="ProcessUIPipelineStage"
    ["FUN_180696a60"]="HandleUIRenderStage"
    ["FUN_180696be0"]="ProcessUIComputeStage"
    ["FUN_180696d90"]="HandleUITransferStage"
    ["FUN_180696f40"]="ProcessUISyncStage"
)

# 获取脚本所在目录
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
TARGET_FILE="$SCRIPT_DIR/../04_ui_system.c"

# 备份原文件
cp "$TARGET_FILE" "$TARGET_FILE.backup"

# 执行函数重命名
for old_name in "${!function_mappings[@]}"; do
    new_name="${function_mappings[$old_name]}"
    echo "重命名函数: $old_name -> $new_name"
    
    # 使用sed进行替换
    sed -i "s/\b$old_name\b/$new_name/g" "$TARGET_FILE"
done

echo "函数重命名完成"