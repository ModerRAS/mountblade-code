#!/bin/bash

# 批量重命名网络模块中的func_函数
cd /dev/shm/mountblade-code/TaleWorlds.Native/src

# 定义函数替换映射
declare -A func_replacements=(
    ["func_0x0001808b8910"]="InitializeNetworkSystemStatus"
    ["func_0x0001808c7d90"]="ProcessNetworkSystemStatus"
    ["func_0x0001808b62c0"]="InitializeNetworkConnectionParameters"
    ["func_0x0001808c92a0"]="SetupNetworkConnectionBuffer"
    ["func_0x00018085f3d0"]="ReleaseNetworkContextMemory"
    ["func_0x00018085df50"]="CleanupNetworkConnectionData"
    ["func_0x0001808b6360"]="ResetNetworkConnectionState"
    ["func_0x00018084de30"]="GetNetworkConnectionChar"
    ["func_0x0001808d7290"]="ValidateNetworkConnectionData"
    ["func_0x0001808cf130"]="InitializeNetworkPacketBuffer"
    ["func_0x0001808cded0"]="ReleaseNetworkPacketBuffer"
    ["func_0x0001808c16c0"]="CleanupNetworkResources"
    ["func_0x00018085d7b0"]="GetNetworkConnectionByte"
    ["func_0x0001808c57f0"]="ProcessNetworkDataTransfer"
    ["func_0x0001808b8390"]="InitializeNetworkSecurityContext"
    ["func_0x000180853cc0"]="ProcessNetworkFloatOperation"
    ["func_0x0001808cd390"]="ValidateNetworkSecurityContext"
    ["func_0x0001808cef10"]="CleanupNetworkPacketData"
    ["func_0x0001808d57c0"]="FindNetworkConnectionIndex"
    ["func_0x000180857b00"]="ValidateNetworkConnectionHandle"
    ["func_0x00018084e700"]="ProcessNetworkConnectionPool"
    ["func_0x0001808d5fb0"]="GetNetworkOperationStatus"
    ["func_0x00018084dcc0"]="CalculateNetworkFloatValue"
    ["func_0x000180242600"]="GetNetworkSystemStatus"
    ["func_0x000180867200"]="GetNetworkStatusFlags"
    ["func_0x00018084c030"]="InitializeNetworkPacketContext"
    ["func_0x000180866480"]="ProcessNetworkStatusUpdate"
    ["func_0x00018088c6e0"]="HandleNetworkConnectionEvent"
    ["func_0x00018085eef0"]="ProcessNetworkConnectionData"
    ["func_0x00018088dd50"]="ValidateNetworkConnectionEvent"
    ["func_0x00018088e6f0"]="ProcessNetworkConnectionEvent"
    ["func_0x00018088c500"]="GetNetworkConnectionInfo"
    ["func_0x000180851e20"]="InitializeNetworkConnectionHandler"
    ["func_0x000180871840"]="ValidateNetworkConnectionIntegrity"
    ["func_0x0001808664e0"]="CheckNetworkConnectionSecurity"
    ["func_0x000180867370"]="ValidateNetworkSecurityFlags"
    ["func_0x00018088a120"]="ResetNetworkSystemState"
    ["func_0x00018088c570"]="ProcessNetworkConnectionRequest"
    ["func_0x0001808bad50"]="InitializeNetworkContextPointer"
    ["func_0x00018088be40"]="ProcessNetworkContextData"
    ["func_0x0001808db610"]="ValidateNetworkContextData"
    ["func_0x0001808dcac0"]="GetNetworkValidationResult"
    ["func_0x0001808661c0"]="CheckNetworkConnectionStatus"
    ["func_0x0001808661d0"]="ValidateNetworkConnectionProtocol"
    ["func_0x000180866330"]="InitializeNetworkProtocolHandler"
    ["func_0x0001808713a0"]="GetNetworkOperationResult"
    ["func_0x0001808671f0"]="ResetNetworkOperationState"
    ["func_0x000180874280"]="InitializeNetworkConnectionBuffer"
    ["func_0x0001808da780"]="ProcessNetworkConnectionIndex"
    ["func_0x0001808c6590"]="UpdateNetworkConnectionFlags"
    ["func_0x00018088e470"]="ValidateNetworkHandle"
    ["func_0x0001808676e0"]="ProcessNetworkConnectionContext"
    ["func_0x0001808e2ff0"]="GetNetworkContextPointer"
    ["func_0x000180866b40"]="CheckNetworkConnectionValidity"
    ["func_0x000180866440"]="ProcessNetworkPacketData"
    ["func_0x0001808e0070"]="HandleNetworkPacketTransfer"
    ["func_0x0001808e0080"]="ProcessNetworkPacketTransfer"
    ["func_0x0001808ded80"]="InitializeNetworkTransferContext"
    ["func_0x0001808e3470"]="ValidateNetworkTransferContext"
    ["func_0x0001808e3b80"]="ProcessNetworkTransferOperation"
    ["func_0x0001808e57e0"]="HandleNetworkTransferRequest"
    ["func_0x0001808967b0"]="UpdateNetworkConnectionState"
    ["func_0x000180767970"]="InitializeNetworkSystem"
    ["func_0x000180772c00"]="SetupNetworkConnection"
    ["func_0x000180874320"]="GetNetworkConnectionData"
    ["func_0x000180879a50"]="GetNetworkConnectionStatus"
    ["func_0x0001808e64e0"]="ProcessNetworkConnectionOperation"
    ["func_0x0001808e64d0"]="HandleNetworkConnectionOperation"
    ["func_0x000180881f80"]="GetNetworkPacketData"
    ["func_0x0001808e64b0"]="ValidateNetworkPacketData"
    ["func_0x0001808e63f0"]="GetNetworkContextData"
    ["func_0x000180879a40"]="InitializeNetworkDataContext"
    ["func_0x00018085fa80"]="GetNetworkOperationStatus"
    ["func_0x00018074b7b0"]="ProcessNetworkDataOperation"
    ["func_0x000180851460"]="ValidateNetworkDataTransfer"
    ["func_0x000180861a30"]="GetNetworkStackData"
    ["func_0x0001808757f0"]="HandleNetworkDataTransfer"
    ["func_0x0001808d2620"]="ProcessNetworkConnectionQueue"
    ["func_0x0001808d2660"]="HandleNetworkConnectionQueue"
    ["func_0x0001808d2830"]="InitializeNetworkConnectionQueue"
    ["func_0x0001808c2130"]="ValidateNetworkPacketTransfer"
    ["func_0x00018088aed0"]="ProcessNetworkPacketTransfer"
    ["func_0x0001808c8710"]="GetNetworkHandleStatus"
    ["func_0x0001808c8700"]="ValidateNetworkHandle"
    ["func_0x0001808c8470"]="ProcessNetworkHandle"
    ["func_0x0001808c7d30"]="InitializeNetworkHandle"
    ["func_0x000180867680"]="CalculateNetworkConnectionData"
    ["func_0x000180867960"]="ProcessNetworkConnectionCalculation"
)

# 执行批量替换
for func_name in "${!func_replacements[@]}"; do
    new_name="${func_replacements[$func_name]}"
    echo "替换 $func_name -> $new_name"
    sed -i "s/$func_name/$new_name/g" 05_networking.c
done

echo "批量替换完成"