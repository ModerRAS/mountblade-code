#!/bin/bash

# 函数重命名映射表
declare -A function_mapping

# 继续添加更多函数映射
function_mapping["FUN_180448fb0"]="ResetRenderPipelineState"
function_mapping["FUN_180449000"]="GetRenderPipelineStatus"
function_mapping["FUN_180449070"]="SetRenderPipelineParameter"
function_mapping["FUN_1804491c0"]="UpdateRenderPipelineConfiguration"
function_mapping["FUN_180449230"]="FlushRenderPipelineCommands"
function_mapping["FUN_180449300"]="ExecuteRenderPipelineBatch"
function_mapping["FUN_1804496f0"]="InitializeRenderCommandBuffer"
function_mapping["FUN_180449780"]="SubmitRenderCommandBuffer"
function_mapping["FUN_180449850"]="ExecuteRenderCommandList"
function_mapping["FUN_1804498f0"]="WaitForRenderCommandCompletion"
function_mapping["FUN_180449930"]="ResetRenderCommandBuffer"
function_mapping["FUN_180449a00"]="AllocateRenderCommandBuffer"
function_mapping["FUN_180449a80"]="ReleaseRenderCommandBuffer"
function_mapping["FUN_180449c00"]="CreateRenderCommandEncoder"
function_mapping["FUN_180449d70"]="DestroyRenderCommandEncoder"
function_mapping["FUN_18044a080"]="EncodeRenderCommand"
function_mapping["FUN_18044a3a0"]="EncodeRenderDrawCommand"
function_mapping["FUN_18044a590"]="EncodeRenderDispatchCommand"
function_mapping["FUN_18044a810"]="EncodeRenderCopyCommand"
function_mapping["FUN_18044aad0"]="EncodeRenderBlitCommand"
function_mapping["FUN_18044ab80"]="EncodeRenderResolveCommand"
function_mapping["FUN_18044ac20"]="EncodeRenderBarrierCommand"
function_mapping["FUN_18044ad90"]="EndRenderCommandEncoding"
function_mapping["FUN_18044af00"]="BeginRenderCommandEncoding"
function_mapping["FUN_18044afb0"]="ValidateRenderCommandEncoding"
function_mapping["FUN_18044b010"]="GetRenderCommandEncoderStatus"
function_mapping["FUN_18044b080"]="SetRenderCommandEncoderParameter"
function_mapping["FUN_18044b110"]="UpdateRenderCommandEncoderState"
function_mapping["FUN_18044b1d0"]="InitializeRenderResourceAllocator"
function_mapping["FUN_18044b280"]="AllocateRenderResource"
function_mapping["FUN_18044b3d0"]="DeallocateRenderResource"
function_mapping["FUN_18044b4f0"]="GetRenderResourceAllocationInfo"
function_mapping["FUN_18044b580"]="SetRenderResourceAllocationPriority"
function_mapping["FUN_18044b610"]="UpdateRenderResourceAllocation"
function_mapping["FUN_18044b6e0"]="GetRenderResourceAllocationStatus"
function_mapping["FUN_18044b700"]="InitializeRenderResourceManager"
function_mapping["FUN_18044b7a0"]="CreateRenderResourcePool"
function_mapping["FUN_18044b910"]="DestroyRenderResourcePool"
function_mapping["FUN_18044baf0"]="AllocateRenderResourceFromPool"
function_mapping["FUN_18044bc50"]="ReleaseRenderResourceToPool"
function_mapping["FUN_18044be30"]="GetRenderResourcePoolStatus"
function_mapping["FUN_18044c0d0"]="ResetRenderResourcePool"
function_mapping["FUN_18044c190"]="UpdateRenderResourcePoolConfiguration"
function_mapping["FUN_18044c420"]="InitializeRenderTextureManager"
function_mapping["FUN_18044c840"]="CreateRenderTexture"
function_mapping["FUN_18044c9c0"]="DestroyRenderTexture"
function_mapping["FUN_18044cb80"]="UpdateRenderTexture"
function_mapping["FUN_18044cd30"]="GetRenderTextureInfo"
function_mapping["FUN_18044ce10"]="SetRenderTextureParameter"
function_mapping["FUN_18044cf20"]="GetRenderTextureParameter"
function_mapping["FUN_18044d0b0"]="InitializeRenderBufferManager"
function_mapping["FUN_18044d0f0"]="CreateRenderBuffer"
function_mapping["FUN_18044d130"]="DestroyRenderBuffer"
function_mapping["FUN_18044d2d0"]="UpdateRenderBuffer"
function_mapping["FUN_18044d340"]="GetRenderBufferInfo"
function_mapping["FUN_18044d450"]="SetRenderBufferParameter"
function_mapping["FUN_18044d4f0"]="GetRenderBufferParameter"
function_mapping["FUN_18044d570"]="InitializeRenderSamplerManager"
function_mapping["FUN_18044d680"]="CreateRenderSampler"
function_mapping["FUN_18044d910"]="DestroyRenderSampler"
function_mapping["FUN_18044da90"]="UpdateRenderSampler"
function_mapping["FUN_18044db70"]="GetRenderSamplerInfo"
function_mapping["FUN_18044dc10"]="SetRenderSamplerParameter"
function_mapping["FUN_18044df40"]="GetRenderSamplerParameter"
function_mapping["FUN_18044e000"]="InitializeRenderShaderManager"
function_mapping["FUN_18044e0d0"]="CreateRenderShader"
function_mapping["FUN_18044e180"]="DestroyRenderShader"
function_mapping["FUN_18044e2b0"]="CompileRenderShader"
function_mapping["FUN_18044e3b0"]="LinkRenderShader"
function_mapping["FUN_18044e4f0"]="GetRenderShaderInfo"
function_mapping["FUN_18044e590"]="SetRenderShaderParameter"
function_mapping["FUN_18044e620"]="GetRenderShaderParameter"
function_mapping["FUN_18044e650"]="InitializeRenderPipelineManager"
function_mapping["FUN_18044e890"]="CreateRenderPipeline"
function_mapping["FUN_18044ead0"]="DestroyRenderPipeline"
function_mapping["FUN_18044ed20"]="UpdateRenderPipeline"
function_mapping["FUN_18044edc0"]="GetRenderPipelineInfo"
function_mapping["FUN_18044efd0"]="SetRenderPipelineParameter"
function_mapping["FUN_18044f210"]="GetRenderPipelineParameter"
function_mapping["FUN_18044f370"]="InitializeRenderCommandQueue"
function_mapping["FUN_18044f780"]="SubmitRenderCommandToQueue"
function_mapping["FUN_18044f880"]="WaitForRenderCommandQueue"
function_mapping["FUN_18044fa00"]="FlushRenderCommandQueue"
function_mapping["FUN_18044ffa0"]="ResetRenderCommandQueue"
function_mapping["FUN_180450070"]="GetRenderCommandQueueStatus"
function_mapping["FUN_180450140"]="SetRenderCommandQueueParameter"
function_mapping["FUN_1804501c0"]="UpdateRenderCommandQueueConfiguration"
function_mapping["FUN_1804502d0"]="InitializeRenderSynchronization"
function_mapping["FUN_180450360"]="CreateRenderFence"
function_mapping["FUN_1804508a0"]="DestroyRenderFence"
function_mapping["FUN_1804509e0"]="SignalRenderFence"
function_mapping["FUN_180450a20"]="WaitForRenderFence"
function_mapping["FUN_180450ba0"]="GetRenderFenceStatus"
function_mapping["FUN_180450d90"]="ResetRenderFence"
function_mapping["FUN_1804510a0"]="InitializeRenderSemaphore"
function_mapping["FUN_1804511e0"]="CreateRenderSemaphore"
function_mapping["FUN_1804512f0"]="DestroyRenderSemaphore"
function_mapping["FUN_180451770"]="SignalRenderSemaphore"
function_mapping["FUN_1804517c0"]="WaitForRenderSemaphore"
function_mapping["FUN_180451890"]="GetRenderSemaphoreStatus"
function_mapping["FUN_1804519d0"]="ResetRenderSemaphore"
function_mapping["FUN_180451bd0"]="InitializeRenderMemoryManager"
function_mapping["FUN_180451ca0"]="AllocateRenderMemory"
function_mapping["FUN_180451d20"]="DeallocateRenderMemory"
function_mapping["FUN_180451da0"]="GetRenderMemoryAllocationInfo"
function_mapping["FUN_180451e30"]="SetRenderMemoryAllocationPriority"
function_mapping["FUN_1804520a0"]="UpdateRenderMemoryAllocation"
function_mapping["FUN_1804522d0"]="GetRenderMemoryAllocationStatus"
function_mapping["FUN_180452500"]="InitializeRenderHeapManager"
function_mapping["FUN_180452630"]="CreateRenderHeap"
function_mapping["FUN_180452f40"]="DestroyRenderHeap"
function_mapping["FUN_180452fa0"]="AllocateRenderHeapMemory"
function_mapping["FUN_1804530a0"]="DeallocateRenderHeapMemory"
function_mapping["FUN_180453140"]="GetRenderHeapInfo"
function_mapping["FUN_1804531d0"]="SetRenderHeapParameter"
function_mapping["FUN_180453300"]="GetRenderHeapParameter"
function_mapping["FUN_1804534d0"]="InitializeRenderDescriptorManager"
function_mapping["FUN_180453580"]="CreateRenderDescriptor"
function_mapping["FUN_180453750"]="DestroyRenderDescriptor"
function_mapping["FUN_1804537b0"]="UpdateRenderDescriptor"
function_mapping["FUN_1804537e0"]="GetRenderDescriptorInfo"
function_mapping["FUN_180453810"]="SetRenderDescriptorParameter"
function_mapping["FUN_180453860"]="GetRenderDescriptorParameter"
function_mapping["FUN_1804538b0"]="InitializeRenderBindingManager"
function_mapping["FUN_1804539b0"]="CreateRenderBinding"
function_mapping["FUN_180453b60"]="DestroyRenderBinding"
function_mapping["FUN_180453cb0"]="UpdateRenderBinding"
function_mapping["FUN_180453d60"]="GetRenderBindingInfo"
function_mapping["FUN_180453de0"]="SetRenderBindingParameter"
function_mapping["FUN_180453e40"]="GetRenderBindingParameter"
function_mapping["FUN_180453f70"]="InitializeRenderStateCache"
function_mapping["FUN_180453f90"]="CreateRenderStateCache"
function_mapping["FUN_180454070"]="DestroyRenderStateCache"
function_mapping["FUN_1804541a0"]="UpdateRenderStateCache"
function_mapping["FUN_180454230"]="GetRenderStateCacheInfo"
function_mapping["FUN_180454300"]="SetRenderStateCacheParameter"
function_mapping["FUN_1804543f0"]="GetRenderStateCacheParameter"
function_mapping["FUN_180454d00"]="InitializeRenderStatistics"
function_mapping["FUN_180454d80"]="UpdateRenderStatistics"
function_mapping["FUN_180454ea0"]="GetRenderStatisticsInfo"
function_mapping["FUN_180454ff0"]="ResetRenderStatistics"
function_mapping["FUN_180455090"]="InitializeRenderProfiler"
function_mapping["FUN_180455250"]="StartRenderProfiling"
function_mapping["FUN_180455340"]="StopRenderProfiling"
function_mapping["FUN_180455430"]="GetRenderProfilingResults"
function_mapping["FUN_1804555a0"]="ResetRenderProfiler"
function_mapping["FUN_1804557b0"]="InitializeRenderDebugger"
function_mapping["FUN_180455980"]="SetRenderDebugParameter"
function_mapping["FUN_1804559d0"]="GetRenderDebugInfo"
function_mapping["FUN_1804354c0"]="InitializeRenderDevice"
function_mapping["FUN_1804355b0"]="CreateRenderDevice"
function_mapping["FUN_180435630"]="DestroyRenderDevice"
function_mapping["FUN_180435690"]="GetRenderDeviceInfo"
function_mapping["FUN_1804357a0"]="SetRenderDeviceParameter"
function_mapping["FUN_180435860"]="GetRenderDeviceParameter"
function_mapping["FUN_1804359d0"]="InitializeRenderContext"
function_mapping["FUN_180435a80"]="CreateRenderContext"
function_mapping["FUN_180435d10"]="DestroyRenderContext"
function_mapping["FUN_180435e20"]="GetRenderContextInfo"
function_mapping["FUN_180435f40"]="SetRenderContextParameter"
function_mapping["FUN_180435f90"]="GetRenderContextParameter"
function_mapping["FUN_180435ff0"]="InitializeRenderSwapChain"
function_mapping["FUN_180436030"]="CreateRenderSwapChain"
function_mapping["FUN_180436160"]="DestroyRenderSwapChain"
function_mapping["FUN_1804362a0"]="GetRenderSwapChainInfo"
function_mapping["FUN_1804369d0"]="SetRenderSwapChainParameter"
function_mapping["FUN_180436a00"]="GetRenderSwapChainParameter"
function_mapping["FUN_180436a50"]="InitializeRenderCommandList"
function_mapping["FUN_180436ae0"]="CreateRenderCommandList"
function_mapping["FUN_180436bb0"]="DestroyRenderCommandList"
function_mapping["FUN_180436bf0"]="ResetRenderCommandList"
function_mapping["FUN_180436c30"]="GetRenderCommandListInfo"
function_mapping["FUN_180436d00"]="SetRenderCommandListParameter"
function_mapping["FUN_180436da0"]="GetRenderCommandListParameter"
function_mapping["FUN_180436f20"]="InitializeRenderCommandEncoder"
function_mapping["FUN_180436fd0"]="CreateRenderCommandEncoder"
function_mapping["FUN_180437050"]="DestroyRenderCommandEncoder"
function_mapping["FUN_180437110"]="ResetRenderCommandEncoder"
function_mapping["FUN_180437290"]="GetRenderCommandEncoderInfo"
function_mapping["FUN_1804372e0"]="SetRenderCommandEncoderParameter"
function_mapping["FUN_180437320"]="GetRenderCommandEncoderParameter"
function_mapping["FUN_1804373a0"]="InitializeRenderRenderPass"
function_mapping["FUN_180437460"]="CreateRenderRenderPass"
function_mapping["FUN_1804374c0"]="DestroyRenderRenderPass"
function_mapping["FUN_180437560"]="ResetRenderRenderPass"
function_mapping["FUN_1804375f0"]="GetRenderRenderPassInfo"
function_mapping["FUN_180437680"]="SetRenderRenderPassParameter"
function_mapping["FUN_1804377b0"]="GetRenderRenderPassParameter"
function_mapping["FUN_1804378e0"]="InitializeRenderFramebuffer"
function_mapping["FUN_18031c260"]="CreateRenderFramebuffer"
function_mapping["FUN_18031c300"]="DestroyRenderFramebuffer"
function_mapping["FUN_180317e00"]="GetRenderFramebufferInfo"
function_mapping["FUN_18031ccb0"]="SetRenderFramebufferParameter"
function_mapping["FUN_18031d520"]="GetRenderFramebufferParameter"
function_mapping["FUN_1803216f0"]="InitializeRenderRenderTarget"
function_mapping["FUN_18033d370"]="CreateRenderRenderTarget"
function_mapping["FUN_180321570"]="DestroyRenderRenderTarget"
function_mapping["FUN_18033d250"]="GetRenderRenderTargetInfo"
function_mapping["FUN_18033d080"]="SetRenderRenderTargetParameter"
function_mapping["FUN_18033d170"]="GetRenderRenderTargetParameter"
function_mapping["FUN_18033ced0"]="InitializeRenderTexture"
function_mapping["FUN_18033cd80"]="CreateRenderTexture"
function_mapping["FUN_18033cc90"]="DestroyRenderTexture"
function_mapping["FUN_180360210"]="GetRenderTextureInfo"
function_mapping["FUN_180380510"]="SetRenderTextureParameter"
function_mapping["FUN_1803805e0"]="GetRenderTextureParameter"
function_mapping["FUN_180380430"]="InitializeRenderBuffer"
function_mapping["FUN_1803802e0"]="CreateRenderBuffer"
function_mapping["FUN_1803800d0"]="DestroyRenderBuffer"
function_mapping["FUN_180380200"]="GetRenderBufferInfo"
function_mapping["FUN_18037ac70"]="SetRenderBufferParameter"
function_mapping["FUN_18037ad00"]="GetRenderBufferParameter"
function_mapping["FUN_180388290"]="InitializeRenderSampler"
function_mapping["FUN_180387ed0"]="CreateRenderSampler"
function_mapping["FUN_180388040"]="DestroyRenderSampler"
function_mapping["FUN_180388120"]="GetRenderSamplerInfo"
function_mapping["FUN_1803896b0"]="SetRenderSamplerParameter"
function_mapping["FUN_18038a340"]="GetRenderSamplerParameter"
function_mapping["FUN_18038a630"]="InitializeRenderShader"
function_mapping["FUN_1804069d0"]="CreateRenderShader"
function_mapping["FUN_180407960"]="DestroyRenderShader"
function_mapping["FUN_18041b4d0"]="GetRenderShaderInfo"

# 文件路径
FILE_PATH="/dev/shm/mountblade-code/TaleWorlds.Native/src/03_rendering.c"

# 遍历所有函数映射并执行替换
for old_name in "${!function_mapping[@]}"; do
    new_name="${function_mapping[$old_name]}"
    
    # 替换函数声明
    sed -i "s|// 函数:.*$old_name|// 函数: $new_name|g" "$FILE_PATH"
    sed -i "s|undefined $old_name|undefined $new_name|g" "$FILE_PATH"
    
    # 替换函数定义
    sed -i "s|void $old_name(|void $new_name(|g" "$FILE_PATH"
    sed -i "s|undefined8 $old_name(|undefined8 $new_name(|g" "$FILE_PATH"
    sed -i "s|char $old_name(|char $new_name(|g" "$FILE_PATH"
    sed -i "s|int $old_name(|int $new_name(|g" "$FILE_PATH"
    sed -i "s|uint $old_name(|uint $new_name(|g" "$FILE_PATH"
    sed -i "s|float $old_name(|float $new_name(|g" "$FILE_PATH"
    sed -i "s|longlong $old_name(|longlong $new_name(|g" "$FILE_PATH"
    sed -i "s|ulonglong $old_name(|ulonglong $new_name(|g" "$FILE_PATH"
    
    # 替换函数调用
    sed -i "s|$old_name(|$new_name(|g" "$FILE_PATH"
    
    echo "已替换函数: $old_name -> $new_name"
done

echo "函数重命名完成！"