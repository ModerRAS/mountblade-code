#include "TaleWorlds.Native.Split.h"

// 01_initialization.c - 重构示例 - 前4个函数

// 全局函数指针 - 系统初始化相关
undefined systemInitializationFunction_18007fcd0;
undefined globalDataPointer_1809fc768;
undefined unknownMemoryBlock_18098c7a0;
undefined dataTablePointer_18098c9b8;
undefined memoryBlock_18098c7b8;
undefined dataTablePointer_18098c940;
undefined memoryBlock_18098c7c8;
undefined dataTablePointer_18098c918;
undefined memoryBlock_18098c7d8;
undefined dataTablePointer_18098c968;
undefined memoryBlock_18098c7f0;
undefined dataTablePointer_18098c990;
undefined memoryBlock_18098c810;
undefined dataTablePointer_18098c9e0;
undefined memoryBlock_18098c870;
undefined dataTablePointer_18098c8f0;

// 核心系统函数指针和相关数据
undefined coreSystemFunction_180073930;
undefined systemMemoryBlock_18098c880;
undefined systemDataTable_18098c8c8;
undefined memoryBlock_18098c898;
undefined systemConfigData_180bf5268;
undefined systemConfigData_180bf5270;
undefined systemConfigData_180bf5280;
undefined systemConfigData_180bf5288;

// 渲染系统初始化函数
undefined renderInitFunction_18005ab20;
undefined renderSystemData_180941760;

// 网络系统初始化函数
undefined networkInitFunction_1800637c0;
undefined networkSystemData_180941780;

// 音频系统初始化函数
undefined audioInitFunction_1800637f0;
undefined audioSystemData_180c91900;

// 输入系统初始化函数和相关数据
undefined inputInitFunction_180045af0;
undefined inputSystemData_180c96330;
undefined inputSystemData_180c96340;
undefined inputSystemData_180c96348;
undefined inputSystemData_180c96350;
undefined inputSystemData_180c96360;
undefined inputSystemData_180c96368;
undefined inputSystemData_180c96318;
undefined inputSystemData_180c96338;
undefined subsystemFunction_18005d5f0;
undefined subsystemData_180942f90;
undefined systemDataTable_180c96220;
undefined8 systemFlag_180c96358;
undefined systemConfigData_180bf64f8;
undefined systemConfigData_180bf6500;
undefined systemConfigData_180bf6508;
undefined systemConfigData_180bf6510;

// 物理系统初始化函数
undefined physicsInitFunction_180059ba0;
undefined physicsSystemData_180a092c4;

// 文件系统初始化函数
undefined filesystemInitFunction_180059620;

// 函数: undefined FUN_180044a30;
undefined FUN_180044a30;
undefined DAT_180be0000;
undefined UNK_1809fdd78;
undefined UNK_1809fddc8;
undefined UNK_180a02968;
undefined UNK_1809fde10;
undefined _guard_check_icall;

// 函数: undefined FUN_180046860;
undefined FUN_180046860;

// 函数: undefined FUN_18005c060;
undefined FUN_18005c060;
undefined UNK_1809fdea8;
undefined UNK_1809fdf38;
undefined UNK_1809fdfd0;
undefined UNK_1809fe050;
undefined UNK_1809fe058;
undefined UNK_1809fe188;
undefined UNK_1809fe190;
undefined UNK_1809fe198;
undefined UNK_1809fe1a0;
undefined UNK_1809fe258;
undefined UNK_1809fe290;
undefined UNK_1800467f0;
undefined UNK_180049760;
undefined UNK_1809fe1f0;
undefined UNK_1809fe200;
undefined UNK_1809fe210;
undefined UNK_180a10098;
undefined DAT_00000008;
undefined UNK_180a30778;
undefined DAT_1809fc8c8;
undefined UNK_1809fe2c0;
undefined DAT_180c912f0;
undefined UNK_1809fe5a0;
undefined DAT_180d48d28;
undefined DAT_180063480;
undefined UNK_1809fe5c0;
undefined UNK_1809fe5f0;
undefined UNK_1809fe608;
undefined UNK_1809fe62c;
int UNK_180c912e0;
longlong UNK_180c912e8;
undefined UNK_1809fe650;

// 函数: undefined FUN_180066dd0;
undefined FUN_180066dd0;
undefined UNK_1809fe800;
undefined UNK_1809fe80c;
undefined DAT_1809fe810;
undefined UNK_1809fe85c;
undefined UNK_1809fe868;
undefined UNK_1809fe880;
undefined UNK_1809fe898;
undefined UNK_1809fe8b0;
undefined UNK_18098ba10;
undefined DAT_18098ba28;
undefined UNK_18098ba40;
undefined UNK_18098ba50;
undefined UNK_18098ba60;
undefined UNK_18098ba70;
undefined UNK_18098ba80;
undefined UNK_18098ba98;
undefined UNK_18098baa0;
undefined DAT_1809fdf28;
undefined UNK_1809fe7f8;
undefined UNK_1809fe8f8;
undefined UNK_1809fe900;
undefined UNK_1809fe910;
undefined UNK_1809fe928;
undefined UNK_1809fe940;
undefined UNK_1809fe950;
undefined UNK_1809fe968;
undefined UNK_1809fe978;
undefined UNK_1809fe988;
undefined UNK_1809fe998;
undefined UNK_1809fe9a8;
undefined UNK_1809fe9b8;
undefined UNK_1809fe9c8;
undefined DAT_1809fc7d8;
undefined DAT_1809fcfc0;
char DAT_180c82843;
char DAT_180c82850;
char DAT_180c82842;
char DAT_180c82844;
undefined UNK_1809fe848;
undefined UNK_1809fea68;
undefined UNK_1809feaa0;
undefined UNK_1809feb24;
undefined UNK_1809feb28;
undefined DAT_1809feb50;
undefined UNK_1809feb58;
undefined UNK_1809feb70;
undefined UNK_1809feb88;
undefined UNK_1809feba8;
undefined UNK_1809febc0;
undefined UNK_1809febc8;
undefined UNK_1809febd8;
undefined UNK_1809febf0;
undefined UNK_180a04f08;
undefined UNK_1809fec28;
undefined UNK_1809fec40;
undefined UNK_180068e60;
undefined UNK_180068e70;
undefined UNK_1809fec50;
undefined UNK_1809fec70;
undefined UNK_1809ff4e0;
undefined DAT_00000018;
undefined DAT_00000010;
undefined UNK_1809fecd8;
undefined UNK_1809fed10;
longlong UNK_00000128;
undefined DAT_00000000;
undefined UNK_1809fed40;
undefined UNK_1809fed78;
ulonglong UNK_000001c8;
ulonglong UNK_000001d0;
ulonglong UNK_000001d8;
undefined8 UNK_000001e0;
undefined8 UNK_000001e8;
undefined8 UNK_000001f0;
longlong UNK_000001f8;
undefined1 DAT_180bf65bc;
undefined UNK_1809feda8;
undefined UNK_1809feeb8;
undefined UNK_1809feec8;
undefined UNK_1809feed8;

/**
 * 初始化系统数据表 - 基础内存分配器
 * 为系统初始化第一个数据表，用于管理基础的内存分配操作
 */
void initializeSystemDataTable_BaseAllocator(void)

{
  char isInitialized;
  void **systemRoot;
  int compareResult;
  longlong **memoryManager;
  longlong memorySize;
  void **currentNode;
  void **previousNode;
  void **nextNode;
  void **newNode;
  void *callbackFunction;
  
  memoryManager = (longlong **)FUN_18008d070();
  systemRoot = (void **)*memoryManager;
  isInitialized = *(char *)((longlong)systemRoot[1] + 0x19);
  callbackFunction = 0;
  previousNode = systemRoot;
  currentNode = (void **)systemRoot[1];
  while (isInitialized == '\0') {
    compareResult = memcmp(currentNode + 4,&DAT_1809fc768,0x10);
    if (compareResult < 0) {
      nextNode = (void **)currentNode[2];
      currentNode = previousNode;
    }
    else {
      nextNode = (void **)*currentNode;
    }
    previousNode = currentNode;
    currentNode = nextNode;
    isInitialized = *(char *)((longlong)nextNode + 0x19);
  }
  if ((previousNode == systemRoot) || (compareResult = memcmp(&DAT_1809fc768,previousNode + 4,0x10), compareResult < 0)) {
    memorySize = FUN_18008f0d0(memoryManager);
    FUN_18008f140(memoryManager,&newNode,previousNode,memorySize + 0x20,memorySize);
    previousNode = newNode;
  }
  previousNode[6] = 0x4770584fbb1df897;
  previousNode[7] = 0x47f249e43f66f2ab;
  previousNode[8] = &UNK_18098c7a0;
  previousNode[9] = 1;
  previousNode[10] = callbackFunction;
  return;
}

/**
 * 初始化系统数据表 - 数据管理器
 * 为系统初始化第二个数据表，用于管理数据结构和表格
 */
void initializeSystemDataTable_DataManager(void)

{
  char isInitialized;
  void **systemRoot;
  int compareResult;
  longlong **memoryManager;
  longlong memorySize;
  void **currentNode;
  void **previousNode;
  void **nextNode;
  void **newNode;
  void *callbackFunction;
  
  memoryManager = (longlong **)FUN_18008d070();
  systemRoot = (void **)*memoryManager;
  isInitialized = *(char *)((longlong)systemRoot[1] + 0x19);
  callbackFunction = 0;
  previousNode = systemRoot;
  currentNode = (void **)systemRoot[1];
  while (isInitialized == '\0') {
    compareResult = memcmp(currentNode + 4,&DAT_18098c9b8,0x10);
    if (compareResult < 0) {
      nextNode = (void **)currentNode[2];
      currentNode = previousNode;
    }
    else {
      nextNode = (void **)*currentNode;
    }
    previousNode = currentNode;
    currentNode = nextNode;
    isInitialized = *(char *)((longlong)nextNode + 0x19);
  }
  if ((previousNode == systemRoot) || (compareResult = memcmp(&DAT_18098c9b8,previousNode + 4,0x10), compareResult < 0)) {
    memorySize = FUN_18008f0d0(memoryManager);
    FUN_18008f140(memoryManager,&newNode,previousNode,memorySize + 0x20,memorySize);
    previousNode = newNode;
  }
  previousNode[6] = 0x4666df49b97e0f10;
  previousNode[7] = 0x4e4b0d63a6ad1d8f;
  previousNode[8] = &UNK_18098c7b8;
  previousNode[9] = 0;
  previousNode[10] = callbackFunction;
  return;
}

/**
 * 初始化系统数据表 - 渲染缓冲区管理器
 * 为系统初始化第三个数据表，用于管理渲染相关的缓冲区
 */
void initializeSystemDataTable_RenderBufferManager(void)

{
  char isInitialized;
  void **systemRoot;
  int compareResult;
  longlong **memoryManager;
  longlong memorySize;
  void **currentNode;
  void **previousNode;
  void **nextNode;
  void **newNode;
  void *callbackFunction;
  
  memoryManager = (longlong **)FUN_18008d070();
  systemRoot = (void **)*memoryManager;
  isInitialized = *(char *)((longlong)systemRoot[1] + 0x19);
  callbackFunction = 0;
  previousNode = systemRoot;
  currentNode = (void **)systemRoot[1];
  while (isInitialized == '\0') {
    compareResult = memcmp(currentNode + 4,&DAT_18098c940,0x10);
    if (compareResult < 0) {
      nextNode = (void **)currentNode[2];
      currentNode = previousNode;
    }
    else {
      nextNode = (void **)*currentNode;
    }
    previousNode = currentNode;
    currentNode = nextNode;
    isInitialized = *(char *)((longlong)nextNode + 0x19);
  }
  if ((previousNode == systemRoot) || (compareResult = memcmp(&DAT_18098c940,previousNode + 4,0x10), compareResult < 0)) {
    memorySize = FUN_18008f0d0(memoryManager);
    FUN_18008f140(memoryManager,&newNode,previousNode,memorySize + 0x20,memorySize);
    previousNode = newNode;
  }
  previousNode[6] = 0x4b2d79e470ee4e2c;
  previousNode[7] = 0x9c552acd3ed5548d;
  previousNode[8] = &UNK_18098c7c8;
  previousNode[9] = 0;
  previousNode[10] = callbackFunction;
  return;
}

/**
 * 初始化系统数据表 - 音频管理器
 * 为系统初始化第四个数据表，用于管理音频系统
 */
void initializeSystemDataTable_AudioManager(void)

{
  char isInitialized;
  void **systemRoot;
  int compareResult;
  longlong **memoryManager;
  longlong memorySize;
  void **currentNode;
  void **previousNode;
  void **nextNode;
  void **newNode;
  void *callbackFunction;
  
  memoryManager = (longlong **)FUN_18008d070();
  systemRoot = (void **)*memoryManager;
  isInitialized = *(char *)((longlong)systemRoot[1] + 0x19);
  callbackFunction = 0;
  previousNode = systemRoot;
  currentNode = (void **)systemRoot[1];
  while (isInitialized == '\0') {
    compareResult = memcmp(currentNode + 4,&DAT_18098c918,0x10);
    if (compareResult < 0) {
      nextNode = (void **)currentNode[2];
      currentNode = previousNode;
    }
    else {
      nextNode = (void **)*currentNode;
    }
    previousNode = currentNode;
    currentNode = nextNode;
    isInitialized = *(char *)((longlong)nextNode + 0x19);
  }
  if ((previousNode == systemRoot) || (compareResult = memcmp(&DAT_18098c918,previousNode + 4,0x10), compareResult < 0)) {
    memorySize = FUN_18008f0d0(memoryManager);
    FUN_18008f140(memoryManager,&newNode,previousNode,memorySize + 0x20,memorySize);
    previousNode = newNode;
  }
  previousNode[6] = 0x4b2d79e470ee4e2c;
  previousNode[7] = 0x9c552acd3ed5548d;
  previousNode[8] = &UNK_18098c7d8;
  previousNode[9] = 0;
  previousNode[10] = callbackFunction;
  return;
}

// ... 其他函数继续按照相同模式重构