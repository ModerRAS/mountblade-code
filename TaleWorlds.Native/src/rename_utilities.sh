#!/bin/bash

# 直接使用sed命令重命名06_utilities.c中的FUN_函数
# 基于实际文件分析的重命名方案

echo "开始重命名06_utilities.c中的FUN_函数..."

# 备份原文件
cp /dev/shm/mountblade-code/TaleWorlds.Native/src/06_utilities.c /dev/shm/mountblade-code/TaleWorlds.Native/src/06_utilities.c.backup

# 定义重命名函数
rename_functions() {
    local file="$1"
    
    # 主要处理函数
    sed -i 's/\bFUN_18089b31f\b/ResourceDataValidator/g' "$file"
    sed -i 's/\bFUN_18089b380\b/ResourceDataProcessor/g' "$file"
    sed -i 's/\bFUN_18089b7d0\b/ResourceChecksumValidator/g' "$file"
    sed -i 's/\bFUN_18089b813\b/ResourceChecksumValidatorAlt1/g' "$file"
    sed -i 's/\bFUN_18089b86d\b/ResourceChecksumValidatorAlt2/g' "$file"
    sed -i 's/\bFUN_18089b896\b/ResourceChecksumValidatorAlt3/g' "$file"
    sed -i 's/\bFUN_18089c030\b/ResourceArrayLoader/g' "$file"
    sed -i 's/\bFUN_18089c1fb\b/ResourceDataHandler/g' "$file"
    sed -i 's/\bFUN_18089c22e\b/ResourceDataHandlerAlt1/g' "$file"
    sed -i 's/\bFUN_18089c2d8\b/ResourceDataProcessorAlt1/g' "$file"
    sed -i 's/\bFUN_18089c630\b/ResourceDataManager/g' "$file"
    sed -i 's/\bFUN_18089c69d\b/ResourceDataManagerAlt1/g' "$file"
    sed -i 's/\bFUN_18089c86d\b/ResourceDataManagerAlt2/g' "$file"
    sed -i 's/\bFUN_18089c872\b/ResourceDataManagerAlt3/g' "$file"
    sed -i 's/\bFUN_18089c94a\b/ResourceDataProcessorAlt2/g' "$file"
    sed -i 's/\bFUN_18089cc80\b/ResourceDataVerifier/g' "$file"
    sed -i 's/\bFUN_18089ccb9\b/ResourceDataVerifierAlt1/g' "$file"
    sed -i 's/\bFUN_18089ce30\b/ResourceDataLoader/g' "$file"
    sed -i 's/\bFUN_18089ce60\b/ResourceDataLoaderAlt1/g' "$file"
    sed -i 's/\bFUN_18089cfd6\b/ResourceDataLoaderAlt2/g' "$file"
    sed -i 's/\bFUN_18089d0f0\b/ResourceDataProcessorAlt3/g' "$file"
    sed -i 's/\bFUN_18089d171\b/ResourceDataProcessorAlt4/g' "$file"
    sed -i 's/\bFUN_18089d193\b/ResourceDataProcessorAlt5/g' "$file"
    sed -i 's/\bFUN_18089dcf0\b/ResourceDataValidatorAlt1/g' "$file"
    sed -i 's/\bFUN_18089dd54\b/ResourceDataValidatorAlt2/g' "$file"
    sed -i 's/\bFUN_18089dd78\b/ResourceDataValidatorAlt3/g' "$file"
    sed -i 's/\bFUN_18089dda2\b/ResourceDataValidatorAlt4/g' "$file"
    sed -i 's/\bFUN_18089de39\b/ResourceDataValidatorAlt5/g' "$file"
    sed -i 's/\bFUN_18089de72\b/ResourceDataValidatorAlt6/g' "$file"
    sed -i 's/\bFUN_18089df40\b/ResourceDataHandlerAlt1/g' "$file"
    sed -i 's/\bFUN_18089dfc1\b/ResourceDataHandlerAlt2/g' "$file"
    sed -i 's/\bFUN_18089dfe4\b/ResourceDataHandlerAlt3/g' "$file"
    sed -i 's/\bFUN_18089e043\b/ResourceDataHandlerAlt4/g' "$file"
    sed -i 's/\bFUN_18089e0d0\b/ResourceDataHandlerAlt5/g' "$file"
    sed -i 's/\bFUN_18089e230\b/ResourceDataProcessorAlt6/g' "$file"
    sed -i 's/\bFUN_18089e297\b/ResourceDataProcessorAlt7/g' "$file"
    sed -i 's/\bFUN_18089e2be\b/ResourceDataProcessorAlt8/g' "$file"
    sed -i 's/\bFUN_18089e2e8\b/ResourceDataProcessorAlt9/g' "$file"
    sed -i 's/\bFUN_18089e4f0\b/ResourceDataValidatorAlt7/g' "$file"
    sed -i 's/\bFUN_18089e558\b/ResourceDataValidatorAlt8/g' "$file"
    sed -i 's/\bFUN_18089e624\b/ResourceDataValidatorAlt9/g' "$file"
    sed -i 's/\bFUN_18089e820\b/ResourceDataManagerAlt4/g' "$file"
    sed -i 's/\bFUN_18089e87d\b/ResourceDataManagerAlt5/g' "$file"
    sed -i 's/\bFUN_18089e9af\b/ResourceDataProcessorAlt10/g' "$file"
    sed -i 's/\bFUN_18089ede0\b/ResourceDataHandlerAlt6/g' "$file"
    sed -i 's/\bFUN_18089ee64\b/ResourceDataHandlerAlt7/g' "$file"
    sed -i 's/\bFUN_18089ef40\b/ResourceDataHandlerAlt8/g' "$file"
    sed -i 's/\bFUN_18089f0b0\b/ResourceDataHandlerAlt9/g' "$file"
    
    # 辅助函数
    sed -i 's/\bFUN_180891af0\b/DataInitializer/g' "$file"
    sed -i 's/\bFUN_180891ca0\b/DataProcessor/g' "$file"
    sed -i 's/\bFUN_180891de0\b/DataValidator/g' "$file"
    sed -i 's/\bFUN_180894300\b/DataChecker/g' "$file"
    sed -i 's/\bFUN_180895360\b/DataAnalyzer/g' "$file"
    sed -i 's/\bFUN_1808974f4\b/ErrorHandler/g' "$file"
    sed -i 's/\bFUN_1808975e0\b/StatusChecker/g' "$file"
    sed -i 's/\bFUN_180897afe\b/ErrorHandlerAlt1/g' "$file"
    sed -i 's/\bFUN_180897b0e\b/ErrorHandlerAlt2/g' "$file"
    sed -i 's/\bFUN_180897b16\b/ErrorHandlerAlt3/g' "$file"
    sed -i 's/\bFUN_180898b40\b/DataSearcher/g' "$file"
    sed -i 's/\bFUN_180898eb0\b/ResourceFinder/g' "$file"
    sed -i 's/\bFUN_180898ef0\b/ResourceLocator/g' "$file"
    sed -i 's/\bFUN_180898fc0\b/ResourceFetcher/g' "$file"
    sed -i 's/\bFUN_180899220\b/ResourceValidator/g' "$file"
    sed -i 's/\bFUN_1808993e0\b/ResourceCalculator/g' "$file"
    sed -i 's/\bFUN_180899c60\b/ResourceAccessor/g' "$file"
    sed -i 's/\bFUN_18089d490\b/DataAuthenticator/g' "$file"
    
    # 资源处理函数
    sed -i 's/\bFUN_1808a2740\b/ResourceHashGetter/g' "$file"
    sed -i 's/\bFUN_1808a2890\b/ResourceHashCalculator/g' "$file"
    sed -i 's/\bFUN_1808a2e00\b/ResourceHashProcessor/g' "$file"
    sed -i 's/\bFUN_1808a4a20\b/ResourceDataFetcher/g' "$file"
    sed -i 's/\bFUN_1808a54c0\b/ResourceDataReader/g' "$file"
    sed -i 's/\bFUN_1808a5630\b/ResourceDataBuilder/g' "$file"
    sed -i 's/\bFUN_1808a5a90\b/ResourceDataScanner/g' "$file"
    sed -i 's/\bFUN_1808a5d60\b/ResourceDataExtractor/g' "$file"
    sed -i 's/\bFUN_1808a6150\b/ResourceDataCompiler/g' "$file"
    sed -i 's/\bFUN_1808a62d0\b/ResourceDataOptimizer/g' "$file"
    sed -i 's/\bFUN_1808a7c40\b/ResourceDataAggregator/g' "$file"
    sed -i 's/\bFUN_1808a79f0\b/ResourceDataRetriever/g' "$file"
    sed -i 's/\bFUN_1808a7f40\b/ResourceDataFormatter/g' "$file"
    sed -i 's/\bFUN_1808a8120\b/ResourceDataTransformer/g' "$file"
    sed -i 's/\bFUN_1808a84c0\b/ResourceDataChecker/g' "$file"
    sed -i 's/\bFUN_1808a8620\b/ResourceDataMonitor/g' "$file"
    sed -i 's/\bFUN_1808afc70\b/ResourceDataAuthenticator/g' "$file"
    sed -i 's/\bFUN_1808acb90\b/ResourceDataProcessorExt/g' "$file"
    sed -i 's/\bFUN_1808ad130\b/ResourceDataManagerExt/g' "$file"
    sed -i 's/\bFUN_1808ad600\b/ResourceDataHandlerExt/g' "$file"
    sed -i 's/\bFUN_1808ad9d0\b/ResourceDataOptimizerExt/g' "$file"
    sed -i 's/\bFUN_1808aec50\b/ResourceDataValidatorExt/g' "$file"
    sed -i 's/\bFUN_1808af280\b/ResourceDataVerifierExt/g' "$file"
    sed -i 's/\bFUN_1808af2e0\b/ResourceDataFetcherExt/g' "$file"
    sed -i 's/\bFUN_1808af8b0\b/ResourceDataCalculatorExt/g' "$file"
    sed -i 's/\bFUN_1808afd90\b/ResourceDataLocatorExt/g' "$file"
    sed -i 's/\bFUN_1808b00b0\b/ResourceDataCheckerExt/g' "$file"
    sed -i 's/\bFUN_1808b0490\b/ResourceDataAnalyzerExt/g' "$file"
    sed -i 's/\bFUN_1808ac750\b/ResourceDataAccessorExt/g' "$file"
    sed -i 's/\bFUN_1808aca30\b/ResourceDataRetrieverExt/g' "$file"
    sed -i 's/\bFUN_1808a2d50\b/ResourceDataBuilderExt/g' "$file"
    sed -i 's/\bFUN_1808a5150\b/ResourceDataScannerExt/g' "$file"
    sed -i 's/\bFUN_1808a71c0\b/ResourceDataCompilerExt/g' "$file"
    sed -i 's/\bFUN_1808de650\b/ResourceDataExtractorExt/g' "$file"
    sed -i 's/\bFUN_1808ddd30\b/ResourceDataOptimizerExt/g' "$file"
    sed -i 's/\bFUN_1808ddf80\b/CleanupHandler/g' "$file"
    sed -i 's/\bFUN_18084c150\b/MemoryManager/g' "$file"
    sed -i 's/\bFUN_18084c470\b/DataBufferManager/g' "$file"
    sed -i 's/\bFUN_180882f00\b/ArrayProcessor/g' "$file"
    sed -i 's/\bFUN_180883750\b/DataValidatorExt/g' "$file"
    
    echo "函数重命名完成"
}

# 执行重命名
rename_functions "/dev/shm/mountblade-code/TaleWorlds.Native/src/06_utilities.c"

echo "06_utilities.c 文件美化完成"
echo "备份文件保存在: /dev/shm/mountblade-code/TaleWorlds.Native/src/06_utilities.c.backup"