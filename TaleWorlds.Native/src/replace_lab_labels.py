#!/usr/bin/env python3
"""
批量替换01_initialization.c中的LAB_标签
"""

import re

# 读取文件
with open('/dev/shm/mountblade-code/TaleWorlds.Native/src/01_initialization.c', 'r', encoding='utf-8') as f:
    content = f.read()

# 创建替换映射
replacements = {
    'LAB_180046c5e': 'SystemResultZeroHandler',
    'LAB_180047f2c': 'StringComparisonLoop',
    'LAB_180047f93': 'StringComparisonEnd',
    'LAB_180048dd7': 'ByteComparisonEnd',
    'LAB_180048db7': 'NodeTraversalStart',
    'LAB_180048dba': 'NodeTraversalContinue',
    'LAB_180048e00': 'ResourceCheckLoop',
    'LAB_180048e20': 'ResourceCheckEnd',
    'LAB_180048e74': 'ConfigurationCheckEnd',
    'LAB_180048f62': 'AdditionalParameterCheck',
    'LAB_18004a2b9': 'ResourceOffsetCheck',
    'LAB_18004a322': 'ResourceProcessingEnd',
    'LAB_18004c7ef': 'BufferAddressCheck',
    'LAB_18004d1b9': 'AllocationFlagsCheck',
    'LAB_18004d1c1': 'ResourcePointerCheck',
    'LAB_18004d1a2': 'MemoryAllocationHandler',
    'LAB_18004e721': 'MemoryAllocationEnd',
    'LAB_18005122d': 'SystemFlagCheck',
    'LAB_180051f8b': 'StringCompareLoop',
    'LAB_180051fc9': 'StringCompareEnd',
    'LAB_180052ce3': 'SystemValueCheck1',
    'LAB_180052de5': 'SystemValueCheck2',
    'LAB_1800535b0': 'DataProcessingLoop',
    'LAB_18005364c': 'DataLengthCheck',
    'LAB_180054302': 'ResourceCountCheck',
    'LAB_18005419d': 'ResourceProcessingStart',
    'LAB_18005485e': 'SystemIdCheck',
    'LAB_180054912': 'SystemIdLoop',
    'LAB_180054ec9': 'MemoryPointerCheck',
    'LAB_180054d28': 'PathSeparatorCheck',
    'LAB_180054d57': 'PathValidationEnd',
    'LAB_180056220': 'SystemCounterCheck',
    'LAB_180056228': 'SystemFlagHandler',
    'LAB_18005726e': 'DataTransferEnd',
    'LAB_180057b97': 'ValueComparisonStart',
    'LAB_180057ba2': 'ValueComparisonEnd',
    'LAB_1800580f9': 'SystemValueHandler',
    'LAB_180058138': 'SystemValueCheckEnd',
    'LAB_18005856a': 'SystemPointerCheck',
    'LAB_1800590e2': 'ValidationLoop',
    'LAB_1800591a6': 'ValidationEnd',
    'LAB_180059885': 'SystemOperationEnd',
    'LAB_18005c9be': 'ResourceNodeCheck',
    'LAB_18005ccff': 'DataManagerCheck',
    'LAB_18005eb20': 'ResourceAllocationEnd',
    'LAB_18005f0e6': 'CounterCheckLoop',
    'LAB_18005f30a': 'ResourceProcessingLoop',
    'LAB_18005f6a2': 'SystemHandleCheck',
    'LAB_18005fa1c': 'ValueRangeCheck',
    'LAB_18005f818': 'ValueProcessingStart',
    'LAB_18005f848': 'ValueCalculationLoop',
    'LAB_18005f84c': 'ValueProcessingContinue',
    'LAB_18005f8c7': 'ValueComparisonHandler',
    'LAB_18005f92b': 'ValueCheckEnd',
    'LAB_18005f8e3': 'ValueHandlerEnd',
    'LAB_18005f9e1': 'ValueFinalCheck',
    'LAB_18005fa01': 'SystemMemoryHandler',
    'LAB_18005fd51': 'SystemValue14Check',
    'LAB_18005fd56': 'SystemValue14Handler',
    'LAB_18005fc81': 'SystemValue14Start',
    'LAB_18005fcf9': 'SystemValue14Loop',
    'LAB_18005fd0d': 'SystemValue14End',
    'LAB_18005fda6': 'SystemValue14Final',
    'LAB_18005ff87': 'UnsignedValueCheck',
    'LAB_180060026': 'UnsignedValueHandler',
    'LAB_180060007': 'UnsignedValueLoop',
    'LAB_1800602a0': 'ResourceProcessingHandler',
    'LAB_1800602f0': 'ResourceDataHandler',
    'LAB_18006031a': 'ResourceDataEnd',
    'LAB_18006039b': 'ResourceFinalCheck',
    'LAB_1800604d1': 'LocalResourceCheck',
    'LAB_1800607cc': 'CharacterCheckEnd',
    'LAB_180060993': 'SystemDataHandler',
    'LAB_18006357e': 'SystemValue3Check',
    'LAB_180063de9': 'DataPointerCheck',
    'LAB_180065009': 'UnsignedValue9Check',
    'LAB_180064eed': 'MemoryPointer1Check',
    'LAB_180065a3e': 'SystemResultCheck',
    'LAB_18006650a': 'SystemIndexCheck',
    'LAB_180066971': 'SystemProcessingEnd',
    'LAB_180066bf4': 'SystemCounterCheck',
    'LAB_180066ec4': 'LocalSystemFlagsCheck',
    'LAB_180068c87': 'SystemValueHandler1',
    'LAB_180068c92': 'SystemValueHandler2',
    'LAB_180068c94': 'SystemValueHandler3',
    'LAB_180069842': 'LocalResourceCheck2',
    'LAB_180069c2b': 'ValidationCheck',
    'LAB_180069dc3': 'SystemValue5Check',
    'LAB_180069dda': 'SystemValue5End',
    'LAB_18006bf7f': 'SecondaryResourceCheck',
    'LAB_18006c61e': 'SystemValue1e8Check',
    'LAB_18006c642': 'SystemValue1e8End',
    'LAB_18006c852': 'MemoryPointer3Check',
    'LAB_18006ca44': 'MemoryPointer4Check',
    'LAB_18006c9ac': 'MemoryCheckLoop',
    'LAB_18006ca95': 'MemoryCheckEnd',
    'LAB_18006ccef': 'ResourceProcessingEnd2',
    'LAB_18006cfb1': 'LocalResourceCheck3',
    'LAB_18006d3bb': 'ValidationCheck2',
    'LAB_18006d67d': 'SystemHandlerEnd',
    'LAB_18006d7fb': 'ResourceHandlerLoop',
    'LAB_18006d957': 'SystemValue5Check2',
    'LAB_18006d9f6': 'SystemValue5End2',
    'LAB_18006d9d7': 'SystemValueCheckLoop',
    'LAB_18006f48d': 'SystemProcessingLoop',
    'LAB_180070230': 'SystemHandlerEnd2',
    'LAB_180070a3f': 'ResourceNodeLoop',
    'LAB_180070b00': 'SystemValue14Check2',
    'LAB_1800718e9': 'SystemProcessingEnd3',
    'LAB_180070db8': 'SystemProcessingStart',
    'LAB_180070e64': 'SystemValue14Check3',
    'LAB_180070ee8': 'SystemProcessingStart2',
    'LAB_180070f81': 'SystemValue14Check4',
    'LAB_180071000': 'SystemValue5Check3',
    'LAB_1800710b8': 'SystemValue6Check',
    'LAB_18007113f': 'SystemValue6Check2',
    'LAB_1800715eb': 'SystemIndexCheck2',
    'LAB_180071af3': 'SystemProcessingLoop2',
    'LAB_180071b69': 'SystemProcessingLoop3',
    'LAB_180071c1a': 'SystemValue12Check',
    'LAB_180071c93': 'SystemValue12End',
    'LAB_180071d1f': 'SystemValue12Check2',
    'LAB_180071d94': 'SystemValue11Check',
    'LAB_180071e34': 'SystemValue2Check',
    'LAB_180071eb0': 'SystemValue11Check2',
    'LAB_180072d7b': 'SystemFlagCheck2',
    'LAB_180072120': 'SystemValue16Check',
    'LAB_1800721e1': 'SystemValue6Check3',
    'LAB_1800722f5': 'BoolCheckEnd',
    'LAB_180072521': 'SystemProcessingLoop4',
    'LAB_1800725ac': 'SystemProcessingEnd4',
    'LAB_180072662': 'SystemValue16Check2',
    'LAB_1800726e7': 'SystemProcessingStart3',
    'LAB_180072780': 'SystemValue16Check3',
    'LAB_1800727ff': 'SystemValue4Check2',
    'LAB_1800728ad': 'SystemValue6Check4',
    'LAB_180072934': 'SystemValue8Check',
    'LAB_1800729bd': 'SystemValue4Check3',
    'LAB_180075f4f': 'FloatValueCheck',
    'LAB_180076feb': 'SystemValue11Check3',
    'LAB_18007738d': 'SystemValue3Check2',
    'LAB_180077847': 'TabCheckLoop',
    'LAB_180077879': 'TabCheckEnd',
    'LAB_180077fcf': 'TabCheckEnd2',
    'LAB_1800782d4': 'SystemValue9Check',
    'LAB_1800782e0': 'SystemValue9End',
    'LAB_180079c12': 'MemoryPointer7Check',
    'LAB_180079cd7': 'MemoryPointer7Check2',
    'LAB_180079d9b': 'ResourceOffsetCheck2',
    'LAB_18007a5ac': 'PointerValueCheck',
    'LAB_18007ac04': 'StackValueCheck',
    'LAB_180079e40': 'SystemHandle1Check',
    'LAB_180079fb3': 'StackPointerCheck',
    'LAB_18007a203': 'SystemHandle1Check2',
    'LAB_18007a142': 'SystemHandle1Check3',
    'LAB_18007a312': 'SystemProcessingEnd5',
    'LAB_18007a58b': 'SystemProcessingEnd6',
    'LAB_18007b44a': 'LocalSystemFlagsCheck2',
    'LAB_18007b454': 'LocalSystemFlagsCheck3',
    'LAB_18007b8dc': 'SystemProcessingLoop5',
    'LAB_18007b8fd': 'SystemProcessingEnd7',
    'LAB_18007eb55': 'ConfigurationDataCheck',
    'LAB_18007f5cb': 'SystemValueCheck3',
    'LAB_18007f7cf': 'SystemCounterCheck2',
    'LAB_18007f89f': 'ResourceIndexCheck',
}

# 执行替换
for old_label, new_label in replacements.items():
    content = content.replace(f'goto {old_label}', f'goto {new_label}')
    content = content.replace(f'{old_label}:', f'{new_label}:')

# 写入文件
with open('/dev/shm/mountblade-code/TaleWorlds.Native/src/01_initialization.c', 'w', encoding='utf-8') as f:
    f.write(content)

print(f"已替换 {len(replacements)} 个LAB_标签")