#!/bin/bash

# 01_initialization.c 函数名美化脚本
# 用于将 FUN_ 函数名替换为有意义的名称

# 定义函数映射
declare -A function_mappings=(
    # 系统初始化相关
    ["FUN_18004ca00"]="ExecuteSystemCallback"
    ["FUN_18004caa0"]="InitializeSystemMemoryTemplate"
    ["FUN_18004cc20"]="SetupSystemResourcePointers"
    ["FUN_18004d020"]="InitializeSystemDataStructure"
    ["FUN_18004e5f0"]="ConfigureSystemMemoryLayout"
    ["FUN_18004eb00"]="SetupSystemParameters"
    ["FUN_18004f8e0"]="InitializeSystemGlobalData"
    ["FUN_18004f900"]="SetupSystemMemoryRegions"
    ["FUN_180050b00"]="InitializeSystemCore"
    ["FUN_180050b30"]="ConfigureSystemSettings"
    ["FUN_180051150"]="InitializeSystemComponents"
    ["FUN_180051d00"]="SetupSystemMemoryManager"
    ["FUN_180051de4"]="InitializeSystemHeap"
    ["FUN_180051e74"]="ConfigureSystemMemoryPool"
    ["FUN_180051eef"]="InitializeSystemTimers"
    ["FUN_180052070"]="SetupSystemEventHandlers"
    ["FUN_180052200"]="InitializeSystemThreads"
    ["FUN_180052940"]="ConfigureSystemThreadParameters"
    ["FUN_180052ef0"]="InitializeSystemSynchronization"
    ["FUN_180053200"]="SetupSystemInterProcessCommunication"
    ["FUN_1800533d0"]="InitializeSystemNetwork"
    ["FUN_180054360"]="ConfigureSystemNetworkParameters"
    ["FUN_1800547b0"]="InitializeSystemFileSystem"
    ["FUN_180055050"]="SetupSystemFileHandlers"
    ["FUN_180055e10"]="InitializeSystemLogging"
    ["FUN_180055e30"]="ConfigureSystemLogParameters"
    ["FUN_180055e60"]="SetupSystemLogBuffer"
    ["FUN_180055ed0"]="InitializeSystemErrorHandling"
    ["FUN_180055f20"]="ConfigureSystemErrorHandlers"
    ["FUN_180055f50"]="SetupSystemExceptionHandling"
    ["FUN_180055f70"]="InitializeSystemSecurity"
    ["FUN_180056150"]="ConfigureSystemSecurityParameters"
    ["FUN_180056410"]="InitializeSystemAuthentication"
    ["FUN_1800565f0"]="SetupSystemAuthenticationHandlers"
    ["FUN_180056810"]="InitializeSystemAuthorization"
    ["FUN_180056b30"]="ConfigureSystemAuthorizationParameters"
    ["FUN_180056c50"]="SetupSystemAccessControl"
    ["FUN_180056e40"]="InitializeSystemEncryption"
    ["FUN_180056f70"]="ConfigureSystemEncryptionParameters"
    ["FUN_180057010"]="SetupSystemEncryptionKeys"
    ["FUN_180057029"]="InitializeSystemDecryption"
    ["FUN_180057062"]="InitializeSystemHashing"
    ["FUN_180057110"]="ConfigureSystemHashParameters"
    ["FUN_180057170"]="SetupSystemHashFunctions"
    ["FUN_1800571e0"]="InitializeSystemDigitalSignatures"
    ["FUN_1800572d0"]="ConfigureSystemSignatureParameters"
    ["FUN_1800572e6"]="InitializeSystemCertificateHandling"
    ["FUN_180057314"]="SetupSystemCertificateStore"
    ["FUN_180057340"]="InitializeSystemSSL"
    ["FUN_18005736b"]="ConfigureSystemSSLParameters"
    ["FUN_180057446"]="InitializeSystemTLS"
    ["FUN_180057479"]="ConfigureSystemTLSParameters"
    ["FUN_180057490"]="SetupSystemTLSCiphers"
    ["FUN_1800574b0"]="InitializeSystemKeyExchange"
    ["FUN_180057510"]="ConfigureSystemKeyExchangeParameters"
    ["FUN_180057530"]="SetupSystemKeyExchangeProtocols"
    ["FUN_180057550"]="InitializeSystemSessionManagement"
    ["FUN_180057556"]="ConfigureSystemSessionParameters"
    ["FUN_180057580"]="SetupSystemSessionHandlers"
    ["FUN_1800575b6"]="InitializeSystemConnectionManagement"
    ["FUN_1800575d4"]="ConfigureSystemConnectionParameters"
    ["FUN_1800575f0"]="SetupSystemConnectionHandlers"
    ["FUN_180057610"]="InitializeSystemSocketManagement"
    ["FUN_180057680"]="ConfigureSystemSocketParameters"
    ["FUN_180057730"]="SetupSystemSocketHandlers"
    ["FUN_180057790"]="InitializeSystemProtocolHandling"
    ["FUN_180057796"]="ConfigureSystemProtocolParameters"
    ["FUN_180057814"]="InitializeSystemPacketHandling"
    ["FUN_180057830"]="ConfigureSystemPacketParameters"
    ["FUN_1800578a0"]="InitializeSystemStreamHandling"
    ["FUN_180057980"]="ConfigureSystemStreamParameters"
    ["FUN_180057bf0"]="SetupSystemStreamHandlers"
    ["FUN_180057d70"]="InitializeSystemBufferManagement"
    ["FUN_180057e90"]="ConfigureSystemBufferParameters"
    ["FUN_180057ec0"]="SetupSystemBufferHandlers"
    ["FUN_180057ee0"]="InitializeSystemCacheManagement"
    ["FUN_180057f10"]="ConfigureSystemCacheParameters"
    ["FUN_180057f30"]="SetupSystemCacheHandlers"
    ["FUN_180058000"]="InitializeSystemPoolManagement"
    ["FUN_180058020"]="ConfigureSystemPoolParameters"
    ["FUN_180058160"]="InitializeSystemQueueManagement"
    ["FUN_180058210"]="ConfigureSystemQueueParameters"
    ["FUN_1800582b0"]="SetupSystemQueueHandlers"
    ["FUN_180058370"]="InitializeSystemStackManagement"
    ["FUN_180058420"]="ConfigureSystemStackParameters"
    ["FUN_1800584e0"]="SetupSystemStackHandlers"
    ["FUN_1800586e0"]="InitializeSystemLinkedListManagement"
    ["FUN_180058710"]="ConfigureSystemLinkedListParameters"
    ["FUN_1800587d0"]="SetupSystemLinkedListHandlers"
    ["FUN_1800587e2"]="InitializeSystemArrayManagement"
    ["FUN_180058826"]="InitializeSystemHashtableManagement"
    ["FUN_180058830"]="ConfigureSystemHashtableParameters"
    ["FUN_1800588c0"]="SetupSystemHashtableHandlers"
    ["FUN_1800588fc"]="InitializeSystemDictionaryManagement"
    ["FUN_18005892b"]="InitializeSystemSorting"
    ["FUN_18005895a"]="InitializeSystemSearching"
    ["FUN_1800589a3"]="ConfigureSystemSearchParameters"
    ["FUN_180058a20"]="SetupSystemSearchHandlers"
    ["FUN_180058a31"]="InitializeSystemCompression"
    ["FUN_180058b3e"]="ConfigureSystemCompressionParameters"
    ["FUN_180058bfa"]="InitializeSystemDecompression"
    ["FUN_180058c16"]="InitializeSystemEncryptionDecryption"
    ["FUN_180058c20"]="ConfigureSystemEncryptionParameters"
    ["FUN_180058c80"]="SetupSystemEncryptionHandlers"
    ["FUN_180058cc0"]="InitializeSystemHashingVerification"
    ["FUN_180058d20"]="ConfigureSystemHashingParameters"
    ["FUN_180058d90"]="SetupSystemHashingHandlers"
    ["FUN_180058db0"]="InitializeSystemSignatureVerification"
    ["FUN_180058e60"]="ConfigureSystemSignatureParameters"
    ["FUN_180058e90"]="SetupSystemSignatureHandlers"
    ["FUN_180058f00"]="InitializeSystemCertificateVerification"
    ["FUN_180059000"]="ConfigureSystemCertificateParameters"
    ["FUN_1800591c0"]="SetupSystemCertificateHandlers"
    ["FUN_180059230"]="InitializeSystemSSLHandshake"
    ["FUN_1800592e4"]="InitializeSystemTLSHandshake"
    ["FUN_180059350"]="ConfigureSystemTLSHandshakeParameters"
    ["FUN_180059380"]="InitializeSystemSessionEstablishment"
    ["FUN_1800593f0"]="ConfigureSystemSessionParameters"
    ["FUN_1800594b0"]="SetupSystemSessionHandlers"
    ["FUN_1800595c0"]="InitializeSystemConnectionEstablishment"
    ["FUN_180059620"]="ConfigureSystemConnectionParameters"
    ["FUN_180059640"]="SetupSystemConnectionHandlers"
    ["FUN_1800596a0"]="InitializeSystemProtocolNegotiation"
    ["FUN_180059730"]="ConfigureSystemProtocolParameters"
    ["FUN_180059820"]="SetupSystemProtocolHandlers"
    ["FUN_180059940"]="InitializeSystemPacketConstruction"
    ["FUN_1800599c0"]="ConfigureSystemPacketParameters"
    ["FUN_1800599df"]="InitializeSystemPacketDestruction"
    ["FUN_180059a04"]="InitializeSystemStreamConstruction"
    ["FUN_180059a20"]="ConfigureSystemStreamParameters"
    ["FUN_180059ba0"]="SetupSystemStreamHandlers"
    ["FUN_180059bc0"]="InitializeSystemBufferConstruction"
    ["FUN_180059ee4"]="ConfigureSystemBufferParameters"
    ["FUN_180059ef9"]="InitializeSystemBufferDestruction"
    ["FUN_180059f4f"]="InitializeSystemPoolConstruction"
)

# 执行替换
for old_name in "${!function_mappings[@]}"; do
    new_name="${function_mappings[$old_name]}"
    sed -i "s/\b${old_name}\b/${new_name}/g" /dev/shm/mountblade-code/TaleWorlds.Native/src/01_initialization.c
done

echo "函数名美化完成"