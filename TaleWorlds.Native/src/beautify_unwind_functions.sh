#!/bin/bash

# 美化Unwind函数的脚本
# 为06_utilities.c文件中的Unwind函数添加注释和重命名

# 函数映射数组 - 将Unwind函数名映射到有意义的名称
declare -A function_mapping=(
    ["Unwind_18090e5a0"]="ExecuteResourceCleanupCallback3"
    ["Unwind_18090e5c0"]="RegisterValidationContextResourceHandler488"
    ["Unwind_18090e5f0"]="RegisterValidationContextResourceHandler128"
    ["Unwind_18090e620"]="RegisterTertiaryOffsetResourceHandler"
    ["Unwind_18090e650"]="ExecuteTertiaryOffsetResourceCallback"
    ["Unwind_18090e660"]="RegisterTertiaryOffsetResourceHandlerExtended"
    ["Unwind_18090e670"]="ExecuteResourceCleanupCallback4"
    ["Unwind_18090e6a0"]="ExecuteResourceCleanupCallback5"
    ["Unwind_18090e6d0"]="ExecuteResourceCleanupCallback6"
    ["Unwind_18090e700"]="ExecuteResourceCleanupCallback7"
    ["Unwind_18090e730"]="ExecuteResourceCleanupCallback8"
    ["Unwind_18090e760"]="ExecuteResourceCleanupCallback9"
    ["Unwind_18090e770"]="ExecuteResourceCleanupCallback10"
    ["Unwind_18090e7a0"]="ExecuteResourceCleanupCallback11"
    ["Unwind_18090e7b0"]="ExecuteResourceCleanupCallback12"
    ["Unwind_18090e7c0"]="ExecuteResourceCleanupCallback13"
    ["Unwind_18090e7d0"]="ExecuteResourceCleanupCallback14"
    ["Unwind_18090e7e0"]="ExecuteResourceCleanupCallback15"
    ["Unwind_18090e7f0"]="ExecuteResourceCleanupCallback16"
    ["Unwind_18090e800"]="ExecuteResourceCleanupCallback17"
    ["Unwind_18090e820"]="ExecuteResourceCleanupCallback18"
    ["Unwind_18090e830"]="ExecuteSystemResourceCleanup1"
    ["Unwind_18090e840"]="ExecuteResourceCleanupCallback19"
    ["Unwind_18090e850"]="ExecuteSystemResourceCleanup2"
    ["Unwind_18090e860"]="ExecuteResourceCleanupCallback20"
    ["Unwind_18090e870"]="ExecuteSystemResourceCleanup3"
    ["Unwind_18090e880"]="ExecuteResourceCleanupCallback21"
    ["Unwind_18090e890"]="ExecuteResourceCleanupCallback22"
    ["Unwind_18090e8a0"]="ExecuteResourceCleanupCallback23"
    ["Unwind_18090e8b0"]="ExecuteResourceCleanupCallback24"
    ["Unwind_18090e8c0"]="ExecuteResourceCleanupCallback25"
    ["Unwind_18090e8d0"]="ExecuteResourceCleanupCallback26"
    ["Unwind_18090e8e0"]="ExecuteResourceCleanupCallback27"
    ["Unwind_18090e8f0"]="ExecuteResourceCleanupCallback28"
    ["Unwind_18090e970"]="ExecuteResourceCleanupCallback29"
    ["Unwind_18090e980"]="ExecuteResourceCleanupCallback30"
    ["Unwind_18090e990"]="ExecuteResourceCleanupCallback31"
    ["Unwind_18090e9a0"]="ExecuteResourceCleanupCallback32"
    ["Unwind_18090e9b0"]="ExecuteSystemResourceCleanup4"
    ["Unwind_18090e9c0"]="ExecuteResourceCleanupWithFlags1"
    ["Unwind_18090e9d0"]="ExecuteResourceCleanupWithFlags2"
    ["Unwind_18090e9e0"]="ExecuteResourceCleanupCallback33"
    ["Unwind_18090ea10"]="ExecuteResourceCleanupCallback34"
    ["Unwind_18090ea40"]="ExecuteResourceCleanupCallback35"
    ["Unwind_18090ea70"]="ExecuteResourceCleanupCallback36"
    ["Unwind_18090eaa0"]="ExecuteResourceCleanupCallback37"
    ["Unwind_18090ead0"]="ExecuteResourceCleanupCallback38"
    ["Unwind_18090eb00"]="ExecuteResourceCleanupCallback39"
    ["Unwind_18090eb10"]="ExecuteResourceCleanupCallback40"
    ["Unwind_18090eb20"]="ExecuteResourceCleanupCallback41"
    ["Unwind_18090eb30"]="ExecuteResourceCleanupCallback42"
    ["Unwind_18090eb40"]="ExecuteResourceCleanupCallback43"
    ["Unwind_18090eb50"]="ExecuteResourceCleanupCallback44"
    ["Unwind_18090eb60"]="ExecuteResourceCleanupCallback45"
    ["Unwind_18090eb70"]="ExecuteResourceCleanupCallback46"
    ["Unwind_18090eb80"]="ExecuteResourceCleanupCallback47"
    ["Unwind_18090eb90"]="ExecuteResourceCleanupCallback48"
    ["Unwind_18090ebc0"]="ExecuteResourceCleanupCallback49"
    ["Unwind_18090ebf0"]="ExecuteResourceCleanupCallback50"
    ["Unwind_18090ec00"]="ExecuteResourceCleanupCallback51"
    ["Unwind_18090ec10"]="ExecuteResourceCleanupCallback52"
    ["Unwind_18090ec20"]="ExecuteResourceCleanupCallback53"
    ["Unwind_18090ec30"]="ExecuteResourceCleanupCallback54"
    ["Unwind_18090ec40"]="ExecuteResourceCleanupCallback55"
    ["Unwind_18090ec50"]="ExecuteResourceCleanupCallback56"
    ["Unwind_18090ec60"]="ExecuteResourceCleanupCallback57"
    ["Unwind_18090ec70"]="ExecuteResourceCleanupCallback58"
    ["Unwind_18090ec80"]="ExecuteResourceCleanupCallback59"
    ["Unwind_18090ec90"]="ExecuteResourceCleanupCallback60"
    ["Unwind_18090eca0"]="ExecuteResourceCleanupCallback61"
    ["Unwind_18090ecd0"]="ExecuteResourceCleanupCallback62"
    ["Unwind_18090ece0"]="ExecuteResourceCleanupCallback63"
    ["Unwind_18090ecf0"]="ExecuteResourceCleanupCallback64"
    ["Unwind_18090ed00"]="ExecuteResourceCleanupWithFlags3"
    ["Unwind_18090ed10"]="ExecuteResourceCleanupWithFlags4"
    ["Unwind_18090ed20"]="ExecuteResourceCleanupCallback65"
    ["Unwind_18090ed30"]="ExecuteResourceCleanupCallback66"
    ["Unwind_18090ed40"]="ExecuteResourceCleanupCallback67"
    ["Unwind_18090ed50"]="ExecuteResourceCleanupCallback68"
    ["Unwind_18090ed60"]="ExecuteResourceCleanupCallback69"
    ["Unwind_18090ed80"]="ExecuteResourceCleanupCallback70"
    ["Unwind_18090ed90"]="ExecuteResourceCleanupWithFlags5"
    ["Unwind_18090eda0"]="ExecuteResourceCleanupWithFlags6"
    ["Unwind_18090edb0"]="ExecuteResourceCleanupCallback71"
    ["Unwind_18090edc0"]="ExecuteResourceCleanupCallback72"
    ["Unwind_18090edd0"]="ExecuteResourceCleanupCallback73"
    ["Unwind_18090ede0"]="ExecuteResourceCleanupWithFlags7"
    ["Unwind_18090edf0"]="ExecuteResourceCleanupCallback74"
    ["Unwind_18090ee40"]="ExecuteResourceCleanupWithFlags8"
    ["Unwind_18090ee50"]="ExecuteResourceCleanupCallback75"
    ["Unwind_18090ee60"]="ExecuteResourceCleanupCallback76"
    ["Unwind_18090ee70"]="ExecuteResourceCleanupCallback77"
    ["Unwind_18090ee80"]="ExecuteResourceCleanupWithFlags9"
    ["Unwind_18090ee90"]="ExecuteResourceCleanupWithFlags10"
    ["Unwind_18090eea0"]="ExecuteResourceCleanupCallback78"
    ["Unwind_18090eeb0"]="ExecuteResourceCleanupCallback79"
    ["Unwind_18090eec0"]="ExecuteResourceCleanupCallback80"
    ["Unwind_18090ef20"]="ExecuteResourceCleanupCallback81"
    ["Unwind_ResourceContextCleanup"]="ExecuteResourceContextCleanup"
    ["Unwind_ResourceHashValidation"]="ExecuteResourceHashValidation"
    ["Unwind_18090ef60"]="ExecuteResourceCleanupCallback82"
    ["Unwind_18090ef70"]="ExecuteResourceCleanupCallback83"
    ["Unwind_18090ef80"]="ExecuteResourceCleanupWithFlags11"
    ["Unwind_18090ef90"]="ExecuteResourceCleanupCallback84"
    ["Unwind_18090efc0"]="ExecuteResourceCleanupWithFlags12"
    ["Unwind_18090efe0"]="ExecuteResourceCleanupCallback85"
    ["Unwind_18090f000"]="ExecuteResourceCleanupCallback86"
    ["Unwind_18090f020"]="ExecuteResourceCleanupWithFlags13"
    ["Unwind_18090f030"]="ExecuteResourceCleanupWithFlags14"
    ["Unwind_18090f040"]="ExecuteResourceCleanupCallback87"
    ["Unwind_18090f050"]="ExecuteResourceCleanupCallback88"
    ["Unwind_18090f060"]="ExecuteResourceCleanupCallback89"
    ["Unwind_18090f070"]="ExecuteResourceCleanupCallback90"
    ["Unwind_18090f080"]="ExecuteResourceCleanupWithFlags15"
    ["Unwind_18090f090"]="ExecuteResourceCleanupWithFlags16"
    ["Unwind_18090f0a0"]="ExecuteResourceCleanupWithFlags17"
    ["Unwind_18090f0b0"]="ExecuteResourceCleanupWithFlags18"
    ["Unwind_18090f0c0"]="ExecuteResourceCleanupCallback91"
    ["Unwind_18090f0d0"]="ExecuteResourceCleanupCallback92"
    ["Unwind_18090f0e0"]="ExecuteResourceCleanupWithFlags19"
    ["Unwind_18090f0f0"]="ExecuteResourceCleanupWithFlags20"
    ["Unwind_18090f100"]="ExecuteResourceCleanupWithFlags21"
    ["Unwind_18090f110"]="ExecuteResourceCleanupCallback93"
    ["Unwind_18090f120"]="ExecuteResourceCleanupCallback94"
    ["Unwind_18090f130"]="ExecuteResourceCleanupCallback95"
    ["Unwind_18090f140"]="ExecuteResourceCleanupCallback96"
    ["Unwind_18090f150"]="ExecuteResourceCleanupCallback97"
    ["Unwind_18090f160"]="ExecuteResourceCleanupCallback98"
    ["Unwind_18090f170"]="ExecuteResourceCleanupCallback99"
    ["Unwind_18090f180"]="ExecuteResourceCleanupCallback100"
    ["Unwind_18090f190"]="ExecuteResourceCleanupCallback101"
    ["Unwind_18090f1a0"]="ExecuteResourceCleanupCallback102"
    ["Unwind_18090f1b0"]="ExecuteResourceCleanupCallback103"
    ["Unwind_18090f1d0"]="ExecuteResourceCleanupCallback104"
    ["Unwind_18090f1f0"]="ExecuteSystemResourceCleanup5"
    ["Unwind_18090f200"]="ExecuteResourceCleanupCallback105"
    ["Unwind_18090f210"]="ExecuteResourceCleanupCallback106"
    ["Unwind_18090f230"]="ExecuteResourceCleanupCallback107"
    ["Unwind_18090f250"]="ExecuteResourceCleanupCallback108"
    ["Unwind_18090f270"]="ExecuteResourceCleanupCallback109"
    ["Unwind_18090f290"]="ExecuteResourceCleanupCallback110"
    ["Unwind_18090f2b0"]="ExecuteResourceCleanupCallback111"
    ["Unwind_18090f2d0"]="ExecuteResourceCleanupCallback112"
    ["Unwind_18090f2f0"]="ExecuteResourceCleanupCallback113"
    ["Unwind_18090f310"]="ExecuteSystemResourceCleanup6"
    ["Unwind_18090f330"]="ExecuteResourceCleanupCallback114"
    ["Unwind_18090f350"]="ExecuteResourceCleanupCallback115"
    ["Unwind_18090f370"]="ExecuteResourceCleanupCallback116"
    ["Unwind_18090f390"]="ExecuteResourceCleanupWithFlags22"
    ["Unwind_18090f3b0"]="ExecuteResourceCleanupCallback117"
    ["Unwind_18090f3d0"]="ExecuteResourceCleanupCallback118"
    ["Unwind_18090f410"]="ExecuteResourceCleanupCallback119"
    ["Unwind_18090f430"]="ExecuteResourceCleanupCallback120"
    ["Unwind_18090f450"]="ExecuteResourceCleanupCallback121"
    ["Unwind_18090f470"]="ExecuteResourceCleanupCallback122"
    ["Unwind_18090f490"]="ExecuteResourceCleanupCallback123"
    ["Unwind_18090f4b0"]="ExecuteResourceCleanupCallback124"
    ["Unwind_18090f4d0"]="ExecuteResourceCleanupCallback125"
    ["Unwind_18090f4f0"]="ExecuteResourceCleanupCallback126"
    ["Unwind_18090f510"]="ExecuteResourceCleanupCallback127"
    ["Unwind_18090f530"]="ExecuteResourceCleanupCallback128"
    ["Unwind_18090f550"]="ExecuteResourceCleanupCallback129"
    ["Unwind_18090f570"]="ExecuteResourceCleanupCallback130"
    ["Unwind_18090f590"]="ExecuteResourceCleanupWithFlags23"
    ["Unwind_18090f5b0"]="ExecuteResourceCleanupCallback131"
    ["Unwind_18090f5d0"]="ExecuteResourceCleanupCallback132"
    ["Unwind_18090f5f0"]="ExecuteResourceCleanupCallback133"
    ["Unwind_18090f610"]="ExecuteResourceCleanupWithFlags24"
    ["Unwind_18090f630"]="ExecuteResourceCleanupWithFlags25"
    ["Unwind_18090f650"]="ExecuteResourceCleanupCallback134"
    ["Unwind_18090f670"]="ExecuteResourceCleanupCallback135"
    ["Unwind_18090f690"]="ExecuteResourceCleanupCallback136"
    ["Unwind_18090f6a0"]="ExecuteResourceCleanupWithFlags26"
    ["Unwind_18090f6b0"]="ExecuteResourceCleanupWithFlags27"
    ["Unwind_18090f6c0"]="ExecuteResourceCleanupCallback137"
    ["Unwind_18090f6f0"]="ExecuteResourceCleanupCallback138"
    ["Unwind_18090f700"]="ExecuteResourceCleanupCallback139"
    ["Unwind_18090f710"]="ExecuteResourceCleanupCallback140"
    ["Unwind_18090f720"]="ExecuteResourceCleanupCallback141"
    ["Unwind_18090f740"]="ExecuteResourceCleanupCallback142"
    ["Unwind_18090f760"]="ExecuteResourceCleanupCallback143"
    ["Unwind_18090f780"]="ExecuteResourceCleanupWithFlags28"
    ["Unwind_18090f790"]="ExecuteResourceCleanupWithFlags29"
    ["Unwind_18090f7a0"]="ExecuteResourceCleanupWithFlags30"
    ["Unwind_18090f7b0"]="ExecuteResourceCleanupWithFlags31"
    ["Unwind_18090f7c0"]="ExecuteResourceCleanupWithFlags32"
    ["Unwind_18090f7d0"]="ExecuteResourceCleanupWithFlags33"
    ["Unwind_18090f7e0"]="ExecuteResourceCleanupCallback144"
    ["Unwind_18090f7f0"]="ExecuteResourceCleanupWithFlags34"
    ["Unwind_18090f800"]="ExecuteResourceCleanupWithFlags35"
    ["Unwind_18090f810"]="ExecuteResourceCleanupCallback145"
    ["Unwind_18090f840"]="ExecuteResourceCleanupWithFlags36"
    ["Unwind_18090f850"]="ExecuteResourceCleanupWithFlags37"
    ["Unwind_18090f860"]="ExecuteResourceCleanupWithFlags38"
    ["Unwind_18090f870"]="ExecuteResourceCleanupWithFlags39"
    ["Unwind_18090f880"]="ExecuteResourceCleanupCallback146"
    ["Unwind_18090f890"]="ExecuteResourceCleanupCallback147"
    ["Unwind_18090f8a0"]="ExecuteResourceCleanupCallback148"
    ["Unwind_18090f8b0"]="ExecuteResourceCleanupCallback149"
    ["Unwind_18090f8c0"]="ExecuteResourceCleanupCallback150"
    ["Unwind_18090f8d0"]="ExecuteResourceCleanupCallback151"
    ["Unwind_18090f8e0"]="ExecuteResourceCleanupCallback152"
    ["Unwind_18090f8f0"]="ExecuteResourceCleanupCallback153"
    ["Unwind_18090f900"]="ExecuteResourceCleanupCallback154"
    ["Unwind_18090f930"]="ExecuteResourceCleanupCallback155"
    ["Unwind_18090f960"]="ExecuteResourceCleanupCallback156"
    ["Unwind_18090f970"]="ExecuteResourceCleanupCallback157"
    ["Unwind_18090f980"]="ExecuteResourceCleanupCallback158"
    ["Unwind_18090f990"]="ExecuteResourceCleanupCallback159"
    ["Unwind_18090f9a0"]="ExecuteResourceCleanupCallback160"
    ["Unwind_18090f9b0"]="ExecuteResourceCleanupCallback161"
    ["Unwind_18090f9c0"]="ExecuteResourceCleanupCallback162"
    ["Unwind_18090f9d0"]="ExecuteResourceCleanupCallback163"
    ["Unwind_18090f9e0"]="ExecuteResourceCleanupCallback164"
    ["Unwind_18090f9f0"]="ExecuteResourceCleanupCallback165"
    ["Unwind_18090fa00"]="ExecuteResourceCleanupCallback166"
    ["Unwind_18090fa10"]="ExecuteResourceCleanupCallback167"
    ["Unwind_18090fa20"]="ExecuteResourceCleanupCallback168"
    ["Unwind_18090fa30"]="ExecuteResourceCleanupCallback169"
    ["Unwind_18090faa0"]="ExecuteResourceCleanupCallback170"
    ["Unwind_18090fab0"]="ExecuteResourceCleanupCallback171"
    ["Unwind_18090fac0"]="ExecuteResourceCleanupCallback172"
    ["Unwind_18090fad0"]="ExecuteResourceCleanupCallback173"
    ["Unwind_18090fae0"]="ExecuteResourceCleanupCallback174"
    ["Unwind_18090faf0"]="ExecuteResourceCleanupCallback175"
    ["Unwind_18090fb00"]="ExecuteResourceCleanupCallback176"
    ["Unwind_18090fb10"]="ExecuteResourceCleanupWithFlags40"
    ["Unwind_18090fb20"]="ExecuteResourceCleanupCallback177"
)

echo "开始美化Unwind函数..."

# 遍历函数映射并替换
for old_name in "${!function_mapping[@]}"; do
    new_name="${function_mapping[$old_name]}"
    
    echo "处理函数: $old_name -> $new_name"
    
    # 使用sed替换函数定义
    sed -i "s/void $old_name(/void $new_name(/g" "06_utilities.c"
    
    # 添加注释模板
    # 这里需要更复杂的处理来添加适当的注释
done

echo "Unwind函数美化完成！"