#!/bin/bash

# 函数重命名映射表
declare -A rename_map=(
    ["FUN_1800c48e0"]="FormatXmlElementOutput"
    ["FUN_1800d6260"]="ProcessXmlStringBufferWithParams"
    ["FUN_1800d66b0"]="ConfigureXmlBufferSettings"
    ["FUN_1800e97f0"]="InitializeXmlContext"
    ["FUN_1800e9840"]="SetupXmlContext"
    ["FUN_1800f6a80"]="ProcessXmlDocument"
    ["FUN_1800f7570"]="ValidateXmlStructure"
    ["FUN_1800f7800"]="ParseXmlData"
    ["FUN_1800f9010"]="ConfigureXmlParser"
    ["FUN_1800f9980"]="InitializeXmlProcessor"
    ["FUN_1800fa230"]="ProcessXmlAttributes"
    ["FUN_1800fa580"]="ValidateXmlSchema"
    ["FUN_1800fa5d0"]="ParseXmlElements"
    ["FUN_1800fc780"]="FormatXmlDocument"
    ["FUN_1800fcd90"]="ProcessXmlNodes"
    ["FUN_1800ff090"]="InitializeXmlTree"
    ["FUN_1801a20e0"]="ProcessXmlCoordinates"
    ["FUN_1801a4e70"]="ConfigureXmlMatrix"
    ["FUN_1801ab580"]="ProcessXmlTransform"
    ["FUN_1801af320"]="ValidateXmlData"
    ["FUN_1801b7270"]="InitializeXmlContext"
    ["FUN_1801b7d80"]="SetupXmlProcessor"
    ["FUN_1801b8340"]="ProcessXmlContent"
    ["FUN_1801b8e40"]="ParseXmlDocument"
    ["FUN_1801bcec0"]="ConfigureXmlBuffer"
    ["FUN_1801bd320"]="InitializeXmlHandler"
    ["FUN_1801bd980"]="ProcessXmlStream"
    ["FUN_1801be7f0"]="ValidateXmlParser"
    ["FUN_1801c08f0"]="ParseXmlStructure"
    ["FUN_1801c1aa0"]="ProcessXmlElements"
    ["FUN_1801c1c40"]="ConfigureXmlReader"
    ["FUN_1801c26f0"]="InitializeXmlSystem"
    ["FUN_1801c2830"]="SetupXmlEngine"
    ["FUN_1801c6b50"]="ProcessXmlData"
    ["FUN_1801c7390"]="ValidateXmlInput"
    ["FUN_1801d06b0"]="ConfigureXmlSettings"
    ["FUN_1801d0890"]="InitializeXmlModule"
    ["FUN_1801def40"]="ProcessXmlFile"
    ["FUN_1801e1250"]="ValidateXmlFormat"
    ["FUN_1801e8210"]="InitializeXmlCache"
    ["FUN_1801e8280"]="SetupXmlBuffer"
    ["FUN_1801e8470"]="ProcessXmlMemory"
    ["FUN_1801ea410"]="ValidateXmlMemory"
    ["FUN_1801ea860"]="ConfigureXmlAllocator"
    ["FUN_1801eac40"]="ProcessXmlAllocation"
    ["FUN_1801eae40"]="InitializeXmlPool"
    ["FUN_1801ec160"]="ValidateXmlResources"
    ["FUN_1801f04c0"]="ProcessXmlCleanup"
    ["FUN_1801f0780"]="ConfigureXmlGarbageCollector"
    ["FUN_1801f1250"]="InitializeXmlCollector"
    ["FUN_1801f2390"]="ProcessXmlDisposal"
    ["FUN_1801f3600"]="ValidateXmlDisposal"
    ["FUN_1801f3650"]="ConfigureXmlRelease"
    ["FUN_1801f9d3c"]="ProcessXmlFinalization"
    ["FUN_1801fd160"]="InitializeXmlShutdown"
    ["FUN_1801fefd0"]="ValidateXmlShutdown"
    ["FUN_1801ff120"]="ConfigureXmlTermination"
    ["FUN_18023a260"]="ProcessXmlExit"
    ["FUN_18023c2e0"]="InitializeXmlDestructor"
    ["FUN_18023c3b0"]="SetupXmlCleanup"
    ["FUN_18023cb40"]="ProcessXmlDestruction"
    ["FUN_18023ec00"]="ValidateXmlCleanup"
    ["FUN_180241e30"]="ConfigureXmlMemoryManager"
    ["FUN_1802426e0"]="InitializeXmlMemory"
    ["FUN_180244080"]="ProcessXmlAllocation"
    ["FUN_180244110"]="ValidateXmlHeap"
    ["FUN_180244540"]="ConfigureXmlStack"
    ["FUN_180244d90"]="InitializeXmlHeap"
    ["FUN_18024a290"]="ProcessXmlMemoryPool"
    ["FUN_18024d120"]="ValidateXmlPool"
    ["FUN_180254770"]="ConfigureXmlArena"
    ["FUN_1802547f0"]="InitializeXmlArena"
    ["FUN_180254e90"]="ProcessXmlArena"
    ["FUN_180255800"]="ValidateXmlArena"
    ["FUN_1802567b0"]="ConfigureXmlCache"
    ["FUN_180256d10"]="InitializeXmlCache"
    ["FUN_180257020"]="ProcessXmlCache"
    ["FUN_180257820"]="ValidateXmlCache"
    ["FUN_1802578c0"]="ConfigureXmlBuffer"
    ["FUN_180257ae0"]="InitializeXmlBuffer"
    ["FUN_180257cb0"]="ProcessXmlBuffer"
    ["FUN_180258000"]="ValidateXmlBuffer"
    ["FUN_18025ac70"]="ConfigureXmlStream"
    ["FUN_18025ba50"]="InitializeXmlStream"
    ["FUN_18025f390"]="ProcessXmlStream"
    ["FUN_180262940"]="ValidateXmlStream"
    ["FUN_18026d890"]="ConfigureXmlNetwork"
    ["FUN_18026db60"]="InitializeXmlNetwork"
    ["FUN_18026ead0"]="ProcessXmlNetwork"
    ["FUN_18026eba0"]="ValidateXmlNetwork"
    ["FUN_1802a0730"]="ConfigureXmlSocket"
    ["FUN_1802aa550"]="InitializeXmlSocket"
    ["FUN_1802aa800"]="ProcessXmlSocket"
    ["FUN_1802ac160"]="ValidateXmlSocket"
    ["FUN_1802ac310"]="ConfigureXmlProtocol"
    ["FUN_1802b67a0"]="InitializeXmlProtocol"
    ["FUN_1802bf680"]="ProcessXmlProtocol"
    ["FUN_1802c02d0"]="ValidateXmlProtocol"
    ["FUN_1802c5aa0"]="ConfigureXmlChannel"
    ["FUN_1802c6e20"]="InitializeXmlChannel"
    ["FUN_1802d8990"]="ProcessXmlChannel"
    ["FUN_1802d8c20"]="ValidateXmlChannel"
    ["FUN_1802db150"]="ConfigureXmlConnection"
    ["FUN_1802db1a0"]="InitializeXmlConnection"
    ["FUN_1802e6a20"]="ProcessXmlConnection"
    ["FUN_1802e6a80"]="ValidateXmlConnection"
    ["FUN_1802eb9a0"]="ConfigureXmlEndpoint"
    ["FUN_1802f23a0"]="InitializeXmlEndpoint"
    ["FUN_1802f43bc"]="ProcessXmlEndpoint"
    ["FUN_1802f4910"]="ValidateXmlEndpoint"
    ["FUN_1802f4f50"]="ConfigureXmlService"
    ["FUN_1802f5ef0"]="InitializeXmlService"
    ["FUN_1802f6040"]="ProcessXmlService"
    ["FUN_1802f6320"]="ValidateXmlService"
    ["FUN_1802f8990"]="ConfigureXmlClient"
    ["FUN_1802fa010"]="InitializeXmlClient"
    ["FUN_1802fb490"]="ProcessXmlClient"
    ["FUN_1802fb620"]="ValidateXmlClient"
    ["FUN_1803a0f80"]="ConfigureXmlServer"
    ["FUN_1803a7870"]="InitializeXmlServer"
    ["FUN_1803a8a90"]="ProcessXmlServer"
    ["FUN_1803afb60"]="ValidateXmlServer"
    ["FUN_1803afbe2"]="ConfigureXmlSession"
    ["FUN_1803afbe6"]="InitializeXmlSession"
    ["FUN_1803b9362"]="ProcessXmlSession"
    ["FUN_1803c4fa0"]="ValidateXmlSession"
    ["FUN_1803c4ff0"]="ConfigureXmlTransaction"
    ["FUN_1803c57f0"]="InitializeXmlTransaction"
    ["FUN_1803c59f0"]="ProcessXmlTransaction"
    ["FUN_1803c5bf0"]="ValidateXmlTransaction"
    ["FUN_1803c5c50"]="ConfigureXmlRequest"
    ["FUN_1803c5e10"]="InitializeXmlRequest"
    ["FUN_1803c5e80"]="ProcessXmlRequest"
    ["FUN_1803c5f10"]="ValidateXmlRequest"
    ["FUN_1803c6090"]="ConfigureXmlResponse"
    ["FUN_1803c6120"]="InitializeXmlResponse"
    ["FUN_1803c6260"]="ProcessXmlResponse"
    ["FUN_1803c62c0"]="ValidateXmlResponse"
    ["FUN_1803c6330"]="ConfigureXmlMessage"
    ["FUN_1803c6880"]="InitializeXmlMessage"
    ["FUN_1803c9a90"]="ProcessXmlMessage"
    ["FUN_1803c9d00"]="ValidateXmlMessage"
    ["FUN_1803ca080"]="ConfigureXmlEvent"
    ["FUN_1803cb450"]="InitializeXmlEvent"
    ["FUN_1803cb810"]="ProcessXmlEvent"
    ["FUN_1803cba10"]="ValidateXmlEvent"
    ["FUN_1803ceb40"]="ConfigureXmlHandler"
    ["FUN_1803cebb0"]="InitializeXmlHandler"
    ["FUN_1803cece0"]="ProcessXmlHandler"
    ["FUN_1803cf140"]="ValidateXmlHandler"
    ["FUN_1803cf200"]="ConfigureXmlCallback"
    ["FUN_1803cf2c0"]="InitializeXmlCallback"
    ["FUN_1803cf970"]="ProcessXmlCallback"
    ["FUN_1803cfb00"]="ValidateXmlCallback"
    ["FUN_1803cfc90"]="ConfigureXmlDelegate"
    ["FUN_1803d06e0"]="InitializeXmlDelegate"
    ["FUN_1803dc0a0"]="ProcessXmlDelegate"
    ["FUN_1803dd070"]="ValidateXmlDelegate"
    ["FUN_1803e1170"]="ConfigureXmlObserver"
    ["FUN_1803e77a0"]="InitializeXmlObserver"
    ["FUN_1803e7940"]="ProcessXmlObserver"
    ["FUN_1803e8a40"]="ValidateXmlObserver"
    ["FUN_1803f2eb0"]="ConfigureXmlListener"
    ["FUN_1803f4bd0"]="InitializeXmlListener"
    ["FUN_1803f5bd0"]="ProcessXmlListener"
    ["FUN_1803f8100"]="ValidateXmlListener"
    ["FUN_1803f82e0"]="ConfigureXmlNotifier"
    ["FUN_1803f9460"]="InitializeXmlNotifier"
    ["FUN_1803ffaf0"]="ProcessXmlNotifier"
)

echo "开始重命名函数..."

# 遍历重命名映射
for old_name in "${!rename_map[@]}"; do
    new_name="${rename_map[$old_name]}"
    
    echo "正在处理: $old_name -> $new_name"
    
    # 使用sed进行替换
    sed -i "s/\b$old_name\b/$new_name/g" /dev/shm/mountblade-code/TaleWorlds.Native/src/99_unmatched_functions.c
done

echo "函数重命名完成！"