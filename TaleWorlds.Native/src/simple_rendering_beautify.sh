#!/bin/bash

# 简化的渲染系统函数美化脚本
# 用于批量替换03_rendering.c中的函数名

# 定义基本函数映射
declare -A function_mapping=(
    ["FUN_180448540"]="GetRenderBoundaryValues"
    ["FUN_1804485c0"]="SetupRenderPipelineParameters"
    ["FUN_1804489a0"]="InitializeRenderPipelineState"
    ["FUN_180448d90"]="ConfigureRenderPipelineOutput"
    ["FUN_180448df0"]="SetupRenderPipelineInput"
    ["FUN_180448ea0"]="ValidateRenderPipelineConfiguration"
    ["FUN_180448f00"]="ExecuteRenderPipelineCommand"
    ["FUN_180448f50"]="ProcessRenderPipelineOutput"
    ["FUN_180448fb0"]="CleanupRenderPipelineResources"
    ["FUN_180449000"]="GetRenderPipelineStatus"
    ["FUN_180449070"]="SetRenderPipelineParameter"
    ["FUN_1804491c0"]="UpdateRenderPipelineConfiguration"
    ["FUN_180449230"]="FlushRenderPipelineCommands"
    ["FUN_180449300"]="ExecuteRenderPipelineBatch"
    ["FUN_1804496f0"]="InitializeRenderCommandBuffer"
    ["FUN_180449780"]="SubmitRenderCommandBuffer"
    ["FUN_180449850"]="ExecuteRenderCommandList"
    ["FUN_1804498f0"]="WaitForRenderCommandCompletion"
    ["FUN_180449930"]="ResetRenderCommandBuffer"
    ["FUN_180449a00"]="AllocateRenderCommandBuffer"
    ["FUN_180449a80"]="ReleaseRenderCommandBuffer"
    ["FUN_180449c00"]="CreateRenderCommandEncoder"
    ["FUN_180449d70"]="DestroyRenderCommandEncoder"
    ["FUN_18044a080"]="EncodeRenderCommand"
    ["FUN_18044a3a0"]="EncodeRenderDrawCommand"
    ["FUN_18044a590"]="EncodeRenderDispatchCommand"
    ["FUN_18044a810"]="EncodeRenderCopyCommand"
    ["FUN_18044aad0"]="EncodeRenderBlitCommand"
    ["FUN_18044ab80"]="EncodeRenderResolveCommand"
    ["FUN_18044ac20"]="EncodeRenderBarrierCommand"
    ["FUN_18044ad90"]="EndRenderCommandEncoding"
    ["FUN_18044af00"]="BeginRenderCommandEncoding"
    ["FUN_18044afb0"]="ValidateRenderCommandEncoding"
    ["FUN_18044b010"]="GetRenderCommandEncoderStatus"
    ["FUN_18044b080"]="SetRenderCommandEncoderParameter"
    ["FUN_18044b110"]="UpdateRenderCommandEncoderState"
    ["FUN_18044b1d0"]="InitializeRenderResourceAllocator"
    ["FUN_18044b280"]="AllocateRenderResource"
    ["FUN_18044b3d0"]="DeallocateRenderResource"
    ["FUN_18044b4f0"]="GetRenderResourceAllocationInfo"
    ["FUN_18044b580"]="SetRenderResourceAllocationPriority"
    ["FUN_18044b610"]="UpdateRenderResourceAllocation"
    ["FUN_18044b6e0"]="GetRenderResourceAllocationStatus"
    ["FUN_18044b700"]="InitializeRenderResourceManager"
    ["FUN_18044b7a0"]="CreateRenderResourcePool"
    ["FUN_18044b910"]="DestroyRenderResourcePool"
    ["FUN_18044baf0"]="AllocateRenderResourceFromPool"
    ["FUN_18044bc50"]="ReleaseRenderResourceToPool"
    ["FUN_18044be30"]="GetRenderResourcePoolStatus"
    ["FUN_18044c0d0"]="ResetRenderResourcePool"
    ["FUN_18044c190"]="UpdateRenderResourcePoolConfiguration"
    ["FUN_18044c420"]="InitializeRenderTextureManager"
    ["FUN_18044c840"]="CreateRenderTexture"
    ["FUN_18044c9c0"]="DestroyRenderTexture"
    ["FUN_18044cb80"]="UpdateRenderTexture"
    ["FUN_18044cd30"]="GetRenderTextureInfo"
    ["FUN_18044ce10"]="SetRenderTextureParameter"
    ["FUN_18044cf20"]="GetRenderTextureParameter"
    ["FUN_18044d0b0"]="InitializeRenderBufferManager"
    ["FUN_18044d0f0"]="CreateRenderBuffer"
    ["FUN_18044d130"]="DestroyRenderBuffer"
    ["FUN_18044d2d0"]="UpdateRenderBuffer"
    ["FUN_18044d340"]="GetRenderBufferInfo"
    ["FUN_18044d450"]="SetRenderBufferParameter"
    ["FUN_18044d4f0"]="GetRenderBufferParameter"
    ["FUN_18044d570"]="InitializeRenderSamplerManager"
    ["FUN_18044d680"]="CreateRenderSampler"
    ["FUN_18044d910"]="DestroyRenderSampler"
    ["FUN_18044da90"]="UpdateRenderSampler"
    ["FUN_18044db70"]="GetRenderSamplerInfo"
    ["FUN_18044dc10"]="SetRenderSamplerParameter"
    ["FUN_18044df40"]="GetRenderSamplerParameter"
    ["FUN_18044e000"]="InitializeRenderShaderManager"
    ["FUN_18044e0d0"]="CreateRenderShader"
    ["FUN_18044e180"]="DestroyRenderShader"
    ["FUN_18044e2b0"]="CompileRenderShader"
    ["FUN_18044e3b0"]="LinkRenderShader"
    ["FUN_18044e4f0"]="GetRenderShaderInfo"
    ["FUN_18044e590"]="SetRenderShaderParameter"
    ["FUN_18044e620"]="GetRenderShaderParameter"
    ["FUN_18044e650"]="InitializeRenderPipelineManager"
    ["FUN_18044e890"]="CreateRenderPipeline"
    ["FUN_18044ead0"]="DestroyRenderPipeline"
    ["FUN_18044ed20"]="UpdateRenderPipeline"
    ["FUN_18044edc0"]="GetRenderPipelineInfo"
    ["FUN_18044efd0"]="SetRenderPipelineParameter"
    ["FUN_18044f210"]="GetRenderPipelineParameter"
    ["FUN_18044f370"]="InitializeRenderCommandQueue"
    ["FUN_18044f780"]="SubmitRenderCommandToQueue"
    ["FUN_18044f880"]="WaitForRenderCommandQueue"
    ["FUN_18044fa00"]="FlushRenderCommandQueue"
    ["FUN_18044ffa0"]="ResetRenderCommandQueue"
    ["FUN_180450070"]="GetRenderCommandQueueStatus"
    ["FUN_180450140"]="SetRenderCommandQueueParameter"
    ["FUN_1804501c0"]="UpdateRenderCommandQueueConfiguration"
    ["FUN_1804502d0"]="InitializeRenderSynchronization"
    ["FUN_180450360"]="CreateRenderFence"
    ["FUN_1804508a0"]="DestroyRenderFence"
    ["FUN_1804509e0"]="SignalRenderFence"
    ["FUN_180450a20"]="WaitForRenderFence"
    ["FUN_180450ba0"]="GetRenderFenceStatus"
    ["FUN_180450d90"]="ResetRenderFence"
    ["FUN_1804510a0"]="InitializeRenderSemaphore"
    ["FUN_1804511e0"]="CreateRenderSemaphore"
    ["FUN_1804512f0"]="DestroyRenderSemaphore"
    ["FUN_180451770"]="SignalRenderSemaphore"
    ["FUN_1804517c0"]="WaitForRenderSemaphore"
    ["FUN_180451890"]="GetRenderSemaphoreStatus"
    ["FUN_1804519d0"]="ResetRenderSemaphore"
    ["FUN_180451bd0"]="InitializeRenderMemoryManager"
    ["FUN_180451ca0"]="AllocateRenderMemory"
    ["FUN_180451d20"]="DeallocateRenderMemory"
    ["FUN_180451da0"]="GetRenderMemoryAllocationInfo"
    ["FUN_180451e30"]="SetRenderMemoryAllocationPriority"
    ["FUN_1804520a0"]="UpdateRenderMemoryAllocation"
    ["FUN_1804522d0"]="GetRenderMemoryAllocationStatus"
    ["FUN_180452500"]="InitializeRenderHeapManager"
    ["FUN_180452630"]="CreateRenderHeap"
    ["FUN_180452f40"]="DestroyRenderHeap"
    ["FUN_180452fa0"]="AllocateRenderHeapMemory"
    ["FUN_1804530a0"]="DeallocateRenderHeapMemory"
    ["FUN_180453140"]="GetRenderHeapInfo"
    ["FUN_1804531d0"]="SetRenderHeapParameter"
    ["FUN_180453300"]="GetRenderHeapParameter"
    ["FUN_1804534d0"]="InitializeRenderDescriptorManager"
    ["FUN_180453580"]="CreateRenderDescriptor"
    ["FUN_180453750"]="DestroyRenderDescriptor"
    ["FUN_1804537b0"]="UpdateRenderDescriptor"
    ["FUN_1804537e0"]="GetRenderDescriptorInfo"
    ["FUN_180453810"]="SetRenderDescriptorParameter"
    ["FUN_180453860"]="GetRenderDescriptorParameter"
    ["FUN_1804538b0"]="InitializeRenderBindingManager"
    ["FUN_1804539b0"]="CreateRenderBinding"
    ["FUN_180453b60"]="DestroyRenderBinding"
    ["FUN_180453cb0"]="UpdateRenderBinding"
    ["FUN_180453d60"]="GetRenderBindingInfo"
    ["FUN_180453de0"]="SetRenderBindingParameter"
    ["FUN_180453e40"]="GetRenderBindingParameter"
    ["FUN_180453f70"]="InitializeRenderStateCache"
    ["FUN_180453f90"]="CreateRenderStateCache"
    ["FUN_180454070"]="DestroyRenderStateCache"
    ["FUN_1804541a0"]="UpdateRenderStateCache"
    ["FUN_180454230"]="GetRenderStateCacheInfo"
    ["FUN_180454300"]="SetRenderStateCacheParameter"
    ["FUN_1804543f0"]="GetRenderStateCacheParameter"
    ["FUN_180454d00"]="InitializeRenderStatistics"
    ["FUN_180454d80"]="UpdateRenderStatistics"
    ["FUN_180454ea0"]="GetRenderStatisticsInfo"
    ["FUN_180454ff0"]="ResetRenderStatistics"
    ["FUN_180455090"]="InitializeRenderProfiler"
    ["FUN_180455250"]="StartRenderProfiling"
    ["FUN_180455340"]="StopRenderProfiling"
    ["FUN_180455430"]="GetRenderProfilingResults"
    ["FUN_1804555a0"]="ResetRenderProfiler"
    ["FUN_1804557b0"]="InitializeRenderDebugger"
    ["FUN_180455980"]="SetRenderDebugParameter"
    ["FUN_1804559d0"]="GetRenderDebugInfo"
    ["FUN_1804354c0"]="InitializeRenderDevice"
    ["FUN_1804355b0"]="CreateRenderDevice"
    ["FUN_180435630"]="DestroyRenderDevice"
    ["FUN_180435690"]="GetRenderDeviceInfo"
    ["FUN_1804357a0"]="SetRenderDeviceParameter"
    ["FUN_180435860"]="GetRenderDeviceParameter"
    ["FUN_1804359d0"]="InitializeRenderContext"
    ["FUN_180435a80"]="CreateRenderContext"
    ["FUN_180435d10"]="DestroyRenderContext"
    ["FUN_180435e20"]="GetRenderContextInfo"
    ["FUN_180435f40"]="SetRenderContextParameter"
    ["FUN_180435f90"]="GetRenderContextParameter"
    ["FUN_180435ff0"]="InitializeRenderSwapChain"
    ["FUN_180436030"]="CreateRenderSwapChain"
    ["FUN_180436160"]="DestroyRenderSwapChain"
    ["FUN_1804362a0"]="GetRenderSwapChainInfo"
    ["FUN_1804369d0"]="SetRenderSwapChainParameter"
    ["FUN_180436a00"]="GetRenderSwapChainParameter"
    ["FUN_180436a50"]="InitializeRenderCommandList"
    ["FUN_180436ae0"]="CreateRenderCommandList"
    ["FUN_180436bb0"]="DestroyRenderCommandList"
    ["FUN_180436bf0"]="ResetRenderCommandList"
    ["FUN_180436c30"]="GetRenderCommandListInfo"
    ["FUN_180436d00"]="SetRenderCommandListParameter"
    ["FUN_180436da0"]="GetRenderCommandListParameter"
    ["FUN_180436f20"]="InitializeRenderCommandEncoder"
    ["FUN_180436fd0"]="CreateRenderCommandEncoder"
    ["FUN_180437050"]="DestroyRenderCommandEncoder"
    ["FUN_180437110"]="ResetRenderCommandEncoder"
    ["FUN_180437290"]="GetRenderCommandEncoderInfo"
    ["FUN_1804372e0"]="SetRenderCommandEncoderParameter"
    ["FUN_180437320"]="GetRenderCommandEncoderParameter"
    ["FUN_1804373a0"]="InitializeRenderRenderPass"
    ["FUN_180437460"]="CreateRenderRenderPass"
    ["FUN_1804374c0"]="DestroyRenderRenderPass"
    ["FUN_180437560"]="ResetRenderRenderPass"
    ["FUN_1804375f0"]="GetRenderRenderPassInfo"
    ["FUN_180437680"]="SetRenderRenderPassParameter"
    ["FUN_1804377b0"]="GetRenderRenderPassParameter"
    ["FUN_1804378e0"]="InitializeRenderFramebuffer"
    ["FUN_18031c260"]="CreateRenderFramebuffer"
    ["FUN_18031c300"]="DestroyRenderFramebuffer"
    ["FUN_180317e00"]="GetRenderFramebufferInfo"
    ["FUN_18031ccb0"]="SetRenderFramebufferParameter"
    ["FUN_18031d520"]="GetRenderFramebufferParameter"
    ["FUN_1803216f0"]="InitializeRenderRenderTarget"
    ["FUN_18033d370"]="CreateRenderRenderTarget"
    ["FUN_180321570"]="DestroyRenderRenderTarget"
    ["FUN_18033d250"]="GetRenderRenderTargetInfo"
    ["FUN_18033d080"]="SetRenderRenderTargetParameter"
    ["FUN_18033d170"]="GetRenderRenderTargetParameter"
    ["FUN_18033ced0"]="InitializeRenderTexture"
    ["FUN_18033cd80"]="CreateRenderTexture"
    ["FUN_18033cc90"]="DestroyRenderTexture"
    ["FUN_180360210"]="GetRenderTextureInfo"
    ["FUN_180380510"]="SetRenderTextureParameter"
    ["FUN_1803805e0"]="GetRenderTextureParameter"
    ["FUN_180380430"]="InitializeRenderBuffer"
    ["FUN_1803802e0"]="CreateRenderBuffer"
    ["FUN_1803800d0"]="DestroyRenderBuffer"
    ["FUN_180380200"]="GetRenderBufferInfo"
    ["FUN_18037ac70"]="SetRenderBufferParameter"
    ["FUN_18037ad00"]="GetRenderBufferParameter"
    ["FUN_180388290"]="InitializeRenderSampler"
    ["FUN_180387ed0"]="CreateRenderSampler"
    ["FUN_180388040"]="DestroyRenderSampler"
    ["FUN_180388120"]="GetRenderSamplerInfo"
    ["FUN_1803896b0"]="SetRenderSamplerParameter"
    ["FUN_18038a340"]="GetRenderSamplerParameter"
    ["FUN_18038a630"]="InitializeRenderShader"
    ["FUN_1804069d0"]="CreateRenderShader"
    ["FUN_180407960"]="DestroyRenderShader"
    ["FUN_18041b4d0"]="GetRenderShaderInfo"
)

# 读取文件
input_file="/dev/shm/mountblade-code/TaleWorlds.Native/src/03_rendering.c"
temp_file="/tmp/rendering_beautify_simple.c"

# 复制原文件到临时文件
cp "$input_file" "$temp_file"

# 执行替换
for old_name in "${!function_mapping[@]}"; do
    new_name="${function_mapping[$old_name]}"
    echo "替换: $old_name -> $new_name"
    sed -i "s/$old_name/$new_name/g" "$temp_file"
done

# 将修改后的内容写回原文件
mv "$temp_file" "$input_file"

echo "渲染系统函数名美化完成"